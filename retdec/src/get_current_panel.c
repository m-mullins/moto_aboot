//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

int32_t __utag_read(char * a1, int32_t a2, char * a3, int32_t a4);
int32_t __utag_write(char * a1, int32_t a2, char * a3, int32_t size);
void function_8f64b05c(void);
void function_8f64b0ac(int32_t a1, int32_t a2);
int32_t get_current_panel(void);
int32_t gfx_flush(int32_t * a1, int32_t a2, int32_t a3);
int32_t gfx_putpixel(int32_t a1, uint32_t a2, uint32_t a3);
int32_t handle_fboot_oem_command_write_protect_test(int32_t a1, int32_t a2);
int32_t is_gpt_initialized(int32_t a1);
int32_t is_usb_connected(int32_t a1, int32_t a2);
int32_t kpdpwr_n_irq_handler(int32_t a1, int32_t a2);
int32_t max17058_get_battery_capacity(int32_t a1, int32_t a2);
int32_t max17058_get_temp_thresholds(char * a1, int32_t a2, int32_t a3);
int32_t mp_mont_prod(int32_t * a1, int32_t result, int32_t a3, int32_t a4);
int32_t mp_mont_reduce(int32_t * a1, int32_t a2, int32_t a3);
int32_t pm8x41_ldo_get(int32_t a1, int32_t a2);
int32_t pm8x41_ldo_set_voltage(char * a1, int32_t a2, int32_t a3);
int32_t register_int_handler(int32_t a1, int32_t a2, int32_t a3);
int32_t send_usb_status_command(char a1, int32_t a2, int32_t a3, int32_t a4);
int32_t set_current_panel(int32_t a1, int32_t a2, int32_t a3);
int32_t speedo_delete(int32_t a1, int32_t a2);
int32_t speedo_start(int32_t a1, int32_t a2, int32_t a3);
int32_t target_detect(int32_t a1, int32_t a2, int32_t a3);
int32_t target_get_reset_status(char * a1, int32_t a2, int32_t a3);
int32_t thread_unblock_from_wait_queue(int32_t a1, int32_t a2, int32_t a3);
int32_t uninit_gpt(char * a1, int32_t a2);
int32_t unmask_interrupt(int32_t a1, int32_t a2, int32_t a3);
int32_t update_usb_status(int32_t a1, int32_t a2, int32_t a3);
int32_t wait_queue_timeout_handler(int32_t a1, int32_t a2, int32_t a3);
int32_t write_protect_enabled_on_eng_hw(int32_t a1, int32_t a2, int32_t a3, int32_t a4);

// --------------------- Global Variables ---------------------

int32_t g21 = 0; // LR
int32_t g22 = 0; // R0
int32_t g23 = 0; // R1
int32_t g24 = 0; // R10
int32_t g25 = 0; // R11
int32_t g26 = 0; // R12
int32_t g27 = 0; // R2
int32_t g28 = 0; // R3
int32_t g29 = 0; // R4
int32_t g30 = 0; // R5
int32_t g31 = 0; // R6
int32_t g32 = 0; // R7
int32_t g33 = 0; // R8
int32_t g34 = 0; // R9
int32_t g1 = 0x746e6300; // 0x8f6a4e20
int32_t g2 = 1; // 0x8f6ac0f0
int32_t g3 = 0xffff; // 0x8f6ac218
int32_t g4 = 1; // 0x8f6afd7c
char * g5; // 0x8f6e06b0
int32_t g6 = 0; // 0x8f6e06b4
int32_t g7 = 0; // 0x8f6e0718
int32_t g8 = 0; // 0x8f6e071c
int32_t g9 = 0; // 0x8f6e0748
int32_t g10 = 0; // 0x8f6e0764
int32_t g11 = 0; // 0x8f6e0b4c
int32_t g12 = 0; // 0x8f6e0b5c
int32_t g13 = 0; // 0x8f6e1310
char * g14; // 0x8f6e131c
char * g15; // 0x8f6e1400
char * g16; // 0x8f6e9400
int32_t g17 = 0; // 0x8f710e80
int32_t g18 = 0; // 0x8f7112f4
int32_t g19 = 0; // 0x8f711550
int32_t g20 = 0; // 0x8f711554

// ------------------------ Functions -------------------------

// Address range: 0x8f633874 - 0x8f633b3b
int32_t get_current_panel(void) {
    // 0x8f633874
    int32_t v1;
    int32_t str = v1; // bp-64
    g32 = &g18;
    g30 = (int32_t)&g5;
    int32_t v2 = g18;
    char * v3 = g5;
    int32_t v4 = (int32_t)v3;
    g29 = v4;
    int32_t v5 = 0; // bp-65
    int32_t v6; // R0
    int32_t result; // 0x8f633af4_2
    int32_t v7; // bp+233
    if (v3 == NULL) {
        int32_t v8 = g6;
        g31 = v8;
        g33 = &g6;
        int32_t v9;
        if (v8 != 0) {
            int32_t v10 = __utag_sizeof(NULL, (int32_t)"bare_board", g27, (int32_t)&g6, v9, 0, v1, 0, 0); // 0x8f6338c8
            int32_t v11; // 0x8f633aa8
            int32_t v12; // 0x8f633958_0
            int32_t v13; // 0x8f6339fc_0
            int32_t v14; // 0x8f633960
            int32_t len; // 0x8f63398c
            int32_t v15; // 0x8f633a04
            int32_t len2; // 0x8f633a14
            int32_t strncmp_rc; // 0x8f633a2c
            char * v16; // 0x8f633a54
            int32_t v17; // R1
            int32_t v18; // R3
            int32_t v19; // R6
            int32_t v20;
            int32_t v21;
            int32_t v22;
            uint32_t v23;
            int32_t v24;
            int32_t v25;
            char * v26;
            int32_t v27;
            char * v28;
            int32_t v29; // 0x8f633a44
            int32_t v30; // 0x8f633948
            int32_t v31; // 0x8f6339d4
            int32_t v32; // 0x8f633aa8
            if (v10 == 1) {
                int32_t v33 = __utag_read((char *)g29, (int32_t)"bare_board", (char *)&v5, 1); // 0x8f6338e4
                if (v33 != 0) {
                    int32_t v34 = 0x1000000 * v5;
                    int32_t v35 = v34 / 0x1000000; // 0x8f6338f0
                    v18 = v35;
                    if ((v34 || 0xffffff) >= 0x1ffffff) {
                        int32_t v36 = get_current_boot_mode(v33, (int32_t)"bare_board", g27, v35); // 0x8f6338fc20
                        if (v36 == 10) {
                            int32_t v37 = get_current_boot_mode(thread_sleep(5, (int32_t)"bare_board", g27, v18, v9, 0, str, 0), (int32_t)"bare_board", g27, v18); // 0x8f6338fc
                            while (v37 == 10) {
                                // 0x8f633908
                                v37 = get_current_boot_mode(thread_sleep(5, (int32_t)"bare_board", g27, v18, v9, 0, str, 0), (int32_t)"bare_board", g27, v18);
                                // continue -> 0x8f633908
                            }
                            // 0x8f633914
                            if (get_current_boot_mode(v37, (int32_t)"bare_board", g27, v18) == 4) {
                                // 0x8f633920
                                // branch -> 0x8f633928
                                // 0x8f633928
                                print_log(1, (int32_t)"UTAG bare board takes control!\n", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                v6 = 0;
                                v7 = 0;
                                // branch -> 0x8f633adc
                            } else {
                                // 0x8f633934
                                v23 = g6;
                                g29 = &g19;
                                if (v23 < 2) {
                                    // 0x8f633a9c
                                    print_log(1, (int32_t)"Only one panel driver installed, using it by default\n", g27, v23, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                    // branch -> 0x8f633aa8
                                    // 0x8f633aa8
                                    v32 = g20;
                                    v11 = v32 == g29 ? 0 : v32;
                                    v18 = v11;
                                    *(int32_t *)g30 = v11;
                                    // branch -> 0x8f633ab8
                                } else {
                                    // 0x8f633944
                                    g33 = &g3;
                                    v30 = v23 | 0xffff;
                                    v18 = v30;
                                    v24 = g3;
                                    g27 = v24;
                                    if (v24 == v30) {
                                        // 0x8f633958
                                        v12 = &str;
                                        v14 = __utag_gets_constprop_6_14(v12, 33, v30, v30, v9, 0, str, 0, 0, 0, 0, 0, 0, 0);
                                        if (v14 == 0) {
                                            // 0x8f6339b0
                                            v17 = (int32_t)"UTAG \"%s\" not programmed, use 1st panel\n";
                                            v20 = (int32_t)"display";
                                            // branch -> 0x8f633a94
                                            // 0x8f633a94
                                            g27 = v20;
                                            print_log(1, (int32_t)"UTAG \"%s\" not programmed, use 1st panel\n", v20, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633aa8
                                            // 0x8f633aa8
                                            v32 = g20;
                                            v11 = v32 == g29 ? 0 : v32;
                                            v18 = v11;
                                            *(int32_t *)g30 = v11;
                                            // branch -> 0x8f633ab8
                                        } else {
                                            // 0x8f633970
                                            v17 = (int32_t)"Searching panel driver for: %s\n";
                                            g27 = v12;
                                            print_log(1, (int32_t)"Searching panel driver for: %s\n", v12, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            v21 = g20;
                                            v19 = v21;
                                            if (v21 != g29) {
                                                // 0x8f633988
                                                // branch -> 0x8f633988
                                                while (true) {
                                                    // 0x8f633988
                                                    len = strlen((char *)&str);
                                                    g27 = len;
                                                    if (strncmp((char *)(v19 + 8), (char *)&str, len) == 0) {
                                                      lab_if_8f6339a4_0_true:
                                                        // if_8f6339a4_0_true
                                                        *(int32_t *)g30 = v19;
                                                        // branch -> after_if_8f6339a4_0
                                                    }
                                                  lab_after_if_8f6339a4_0:;
                                                    int32_t v38 = *(int32_t *)(v19 + 4);
                                                    v19 = v38;
                                                    if (v38 == g29) {
                                                        // break -> 0x8f633ab8
                                                        break;
                                                    }
                                                    // continue -> 0x8f633988
                                                }
                                                // 0x8f633ab8
                                                v28 = g5;
                                                if (v28 == NULL) {
                                                    // 0x8f633ac4
                                                    print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                    // branch -> 0x8f633ad8
                                                } else {
                                                    // 0x8f633ad4
                                                    init_panel_power_list((int32_t)v28, v12, g27, v18, v9, 0, str, 0);
                                                    // branch -> 0x8f633ad8
                                                }
                                                // 0x8f633ad8
                                                // branch -> 0x8f633adc
                                                // 0x8f633adc
                                                if (v2 != g18) {
                                                    // 0x8f633aec
                                                    __stack_chk_fail();
                                                    // branch -> 0x8f633af0
                                                }
                                                // 0x8f633af0
                                                return (int32_t)g5;
                                            }
                                        }
                                        // 0x8f633ab8
                                        v28 = g5;
                                        if (v28 == NULL) {
                                            // 0x8f633ac4
                                            print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633ad8
                                        } else {
                                            // 0x8f633ad4
                                            init_panel_power_list((int32_t)v28, v17, g27, v18, v9, 0, str, 0);
                                            // branch -> 0x8f633ad8
                                        }
                                        // 0x8f633ad8
                                        // branch -> 0x8f633adc
                                        // 0x8f633adc
                                        if (v2 != g18) {
                                            // 0x8f633aec
                                            __stack_chk_fail();
                                            // branch -> 0x8f633af0
                                        }
                                        // 0x8f633af0
                                        return (int32_t)g5;
                                    }
                                    // 0x8f6339bc
                                    g23 = (int32_t)"Searching panel driver for supplier ID: 0x%x\n";
                                    print_log(1, (int32_t)"Searching panel driver for supplier ID: 0x%x\n", v24, v30, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                    v22 = g20;
                                    g31 = v22;
                                    if (v22 == g29) {
                                        // 0x8f6339f0
                                        v26 = g5;
                                        v27 = (int32_t)v26;
                                        if (v26 == NULL) {
                                            // 0x8f633a88
                                            v20 = g3;
                                            // branch -> 0x8f633a94
                                            // 0x8f633a94
                                            g27 = v20;
                                            print_log(-1, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", v20, v27, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633aa8
                                            // 0x8f633aa8
                                            v32 = g20;
                                            v11 = v32 == g29 ? 0 : v32;
                                            v18 = v11;
                                            *(int32_t *)g30 = v11;
                                            // branch -> 0x8f633ab8
                                            // 0x8f633ab8
                                            v28 = g5;
                                            if (v28 == NULL) {
                                                // 0x8f633ac4
                                                print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                // branch -> 0x8f633ad8
                                            } else {
                                                // 0x8f633ad4
                                                init_panel_power_list((int32_t)v28, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", g27, v18, v9, 0, str, 0);
                                                // branch -> 0x8f633ad8
                                            }
                                            // 0x8f633ad8
                                            // branch -> 0x8f633adc
                                            // 0x8f633adc
                                            if (v2 != g18) {
                                                // 0x8f633aec
                                                __stack_chk_fail();
                                                // branch -> 0x8f633af0
                                            }
                                            // 0x8f633af0
                                            return (int32_t)g5;
                                        }
                                        // 0x8f6339fc
                                        v13 = &str;
                                        v15 = __utag_gets_constprop_6_14(v13, 32, v24, v27, v9, 0, str, 0, 0, 0, 0, 0, 0, 0);
                                        if (v15 != 0) {
                                            // 0x8f633a10
                                            len2 = strlen((char *)&str);
                                            v18 = (int32_t)&g5;
                                            g27 = len2;
                                            strncmp_rc = strncmp((char *)((int32_t)g5 + 8), (char *)&str, len2);
                                            if (strncmp_rc == 0) {
                                                // 0x8f633ab8
                                                v28 = g5;
                                                if (v28 == NULL) {
                                                    // 0x8f633ac4
                                                    print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                    // branch -> 0x8f633ad8
                                                } else {
                                                    // 0x8f633ad4
                                                    init_panel_power_list((int32_t)v28, v13, g27, v18, v9, 0, str, 0);
                                                    // branch -> 0x8f633ad8
                                                }
                                                // 0x8f633ad8
                                                // branch -> 0x8f633adc
                                                // 0x8f633adc
                                                if (v2 != g18) {
                                                    // 0x8f633aec
                                                    __stack_chk_fail();
                                                    // branch -> 0x8f633af0
                                                }
                                                // 0x8f633af0
                                                return (int32_t)g5;
                                            }
                                        }
                                        // 0x8f633a38
                                        v17 = (int32_t)"programming UTAG \"%s\" as %s.\n";
                                        g27 = (int32_t)"display";
                                        v29 = g31 + 8;
                                        v18 = v29;
                                        print_log(1, (int32_t)"programming UTAG \"%s\" as %s.\n", (int32_t)"display", v29, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                        v16 = __utag_puts_constprop_8((int32_t)g5 + 8, v17, g27, v18, v9, 0, str);
                                        if (v16 == NULL) {
                                            // 0x8f633a60
                                            v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                                            g27 = (int32_t)"display";
                                            print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633ab8
                                        } else {
                                            // 0x8f633a74
                                            if (__utags_flush(0, v17, g27, v18, v9, 0, str, 0) != 0) {
                                                // 0x8f633a60
                                                v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                                                g27 = (int32_t)"display";
                                                print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                // branch -> 0x8f633ab8
                                            }
                                        }
                                        // 0x8f633ab8
                                        v28 = g5;
                                        if (v28 == NULL) {
                                            // 0x8f633ac4
                                            print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633ad8
                                        } else {
                                            // 0x8f633ad4
                                            init_panel_power_list((int32_t)v28, v17, g27, v18, v9, 0, str, 0);
                                            // branch -> 0x8f633ad8
                                        }
                                        // 0x8f633ad8
                                        // branch -> 0x8f633adc
                                        // 0x8f633adc
                                        if (v2 != g18) {
                                            // 0x8f633aec
                                            __stack_chk_fail();
                                            // branch -> 0x8f633af0
                                        }
                                        // 0x8f633af0
                                        return (int32_t)g5;
                                    }
                                    int32_t v39 = v22; // 0x8f6339d4
                                    while (true) {
                                        // 0x8f6339d4
                                        v31 = *(int32_t *)(v39 + 560);
                                        g28 = v31;
                                        v25 = g3;
                                        g22 = v25;
                                        g21 = -0x709cc620;
                                        ((int32_t (*)(int32_t, int32_t))v31)(v25, v31);
                                        if (g22 == 0) {
                                          lab_if_8f6339e8_0_true:;
                                            int32_t v40 = *(int32_t *)(g31 + 4);
                                            g31 = v40;
                                            if (v40 == g29) {
                                                // break -> 0x8f6339f0
                                                break;
                                            }
                                            v39 = v40;
                                            // continue -> 0x8f6339d4
                                            continue;
                                        } else {
                                            // if_8f6339e4_0_true
                                            *(int32_t *)g30 = g31;
                                            // branch -> 0x8f6339f0
                                        }
                                        // 0x8f6339f0
                                        v26 = g5;
                                        v27 = (int32_t)v26;
                                        if (v26 == NULL) {
                                            // 0x8f633a88
                                            v20 = g3;
                                            // branch -> 0x8f633a94
                                            // 0x8f633a94
                                            g27 = v20;
                                            print_log(-1, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", v20, v27, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633aa8
                                            // 0x8f633aa8
                                            v32 = g20;
                                            v11 = v32 == g29 ? 0 : v32;
                                            v18 = v11;
                                            *(int32_t *)g30 = v11;
                                            // branch -> 0x8f633ab8
                                            // 0x8f633ab8
                                            v28 = g5;
                                            if (v28 == NULL) {
                                                // 0x8f633ac4
                                                print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                // branch -> 0x8f633ad8
                                            } else {
                                                // 0x8f633ad4
                                                init_panel_power_list((int32_t)v28, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", g27, v18, v9, 0, str, 0);
                                                // branch -> 0x8f633ad8
                                            }
                                            // 0x8f633ad8
                                            // branch -> 0x8f633adc
                                            // 0x8f633adc
                                            if (v2 != g18) {
                                                // 0x8f633aec
                                                __stack_chk_fail();
                                                // branch -> 0x8f633af0
                                            }
                                            // 0x8f633af0
                                            return (int32_t)g5;
                                        }
                                        // 0x8f6339fc
                                        v13 = &str;
                                        v15 = __utag_gets_constprop_6_14(v13, 32, v24, v27, v9, 0, str, 0, 0, 0, 0, 0, 0, 0);
                                        if (v15 != 0) {
                                            // 0x8f633a10
                                            len2 = strlen((char *)&str);
                                            v18 = (int32_t)&g5;
                                            g27 = len2;
                                            strncmp_rc = strncmp((char *)((int32_t)g5 + 8), (char *)&str, len2);
                                            if (strncmp_rc == 0) {
                                                // 0x8f633ab8
                                                v28 = g5;
                                                if (v28 == NULL) {
                                                    // 0x8f633ac4
                                                    print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                    // branch -> 0x8f633ad8
                                                } else {
                                                    // 0x8f633ad4
                                                    init_panel_power_list((int32_t)v28, v13, g27, v18, v9, 0, str, 0);
                                                    // branch -> 0x8f633ad8
                                                }
                                                // 0x8f633ad8
                                                // branch -> 0x8f633adc
                                                // 0x8f633adc
                                                if (v2 != g18) {
                                                    // 0x8f633aec
                                                    __stack_chk_fail();
                                                    // branch -> 0x8f633af0
                                                }
                                                // 0x8f633af0
                                                return (int32_t)g5;
                                            }
                                        }
                                        // 0x8f633a38
                                        v17 = (int32_t)"programming UTAG \"%s\" as %s.\n";
                                        g27 = (int32_t)"display";
                                        v29 = g31 + 8;
                                        v18 = v29;
                                        print_log(1, (int32_t)"programming UTAG \"%s\" as %s.\n", (int32_t)"display", v29, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                        v16 = __utag_puts_constprop_8((int32_t)g5 + 8, v17, g27, v18, v9, 0, str);
                                        if (v16 == NULL) {
                                            // 0x8f633a60
                                            v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                                            g27 = (int32_t)"display";
                                            print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633ab8
                                        } else {
                                            // 0x8f633a74
                                            if (__utags_flush(0, v17, g27, v18, v9, 0, str, 0) != 0) {
                                                // 0x8f633a60
                                                v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                                                g27 = (int32_t)"display";
                                                print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                // branch -> 0x8f633ab8
                                            }
                                        }
                                        // 0x8f633ab8
                                        v28 = g5;
                                        if (v28 == NULL) {
                                            // 0x8f633ac4
                                            print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633ad8
                                        } else {
                                            // 0x8f633ad4
                                            init_panel_power_list((int32_t)v28, v17, g27, v18, v9, 0, str, 0);
                                            // branch -> 0x8f633ad8
                                        }
                                        // 0x8f633ad8
                                        // branch -> 0x8f633adc
                                        // 0x8f633adc
                                        if (v2 != g18) {
                                            // 0x8f633aec
                                            __stack_chk_fail();
                                            // branch -> 0x8f633af0
                                        }
                                        // 0x8f633af0
                                        return (int32_t)g5;
                                    }
                                    // 0x8f6339f0
                                    v26 = g5;
                                    v27 = (int32_t)v26;
                                    if (v26 == NULL) {
                                        // 0x8f633a88
                                        v20 = g3;
                                        // branch -> 0x8f633a94
                                        // 0x8f633a94
                                        g27 = v20;
                                        print_log(-1, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", v20, v27, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                        // branch -> 0x8f633aa8
                                        // 0x8f633aa8
                                        v32 = g20;
                                        v11 = v32 == g29 ? 0 : v32;
                                        v18 = v11;
                                        *(int32_t *)g30 = v11;
                                        // branch -> 0x8f633ab8
                                        // 0x8f633ab8
                                        v28 = g5;
                                        if (v28 == NULL) {
                                            // 0x8f633ac4
                                            print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633ad8
                                        } else {
                                            // 0x8f633ad4
                                            init_panel_power_list((int32_t)v28, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", g27, v18, v9, 0, str, 0);
                                            // branch -> 0x8f633ad8
                                        }
                                        // 0x8f633ad8
                                        // branch -> 0x8f633adc
                                        // 0x8f633adc
                                        if (v2 != g18) {
                                            // 0x8f633aec
                                            __stack_chk_fail();
                                            // branch -> 0x8f633af0
                                        }
                                        // 0x8f633af0
                                        return (int32_t)g5;
                                    }
                                    // 0x8f6339fc
                                    v13 = &str;
                                    v15 = __utag_gets_constprop_6_14(v13, 32, v24, v27, v9, 0, str, 0, 0, 0, 0, 0, 0, 0);
                                    if (v15 != 0) {
                                        // 0x8f633a10
                                        len2 = strlen((char *)&str);
                                        v18 = (int32_t)&g5;
                                        g27 = len2;
                                        strncmp_rc = strncmp((char *)((int32_t)g5 + 8), (char *)&str, len2);
                                        if (strncmp_rc == 0) {
                                            // 0x8f633ab8
                                            v28 = g5;
                                            if (v28 == NULL) {
                                                // 0x8f633ac4
                                                print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                                // branch -> 0x8f633ad8
                                            } else {
                                                // 0x8f633ad4
                                                init_panel_power_list((int32_t)v28, v13, g27, v18, v9, 0, str, 0);
                                                // branch -> 0x8f633ad8
                                            }
                                            // 0x8f633ad8
                                            // branch -> 0x8f633adc
                                            // 0x8f633adc
                                            if (v2 != g18) {
                                                // 0x8f633aec
                                                __stack_chk_fail();
                                                // branch -> 0x8f633af0
                                            }
                                            // 0x8f633af0
                                            return (int32_t)g5;
                                        }
                                    }
                                    // 0x8f633a38
                                    v17 = (int32_t)"programming UTAG \"%s\" as %s.\n";
                                    g27 = (int32_t)"display";
                                    v29 = g31 + 8;
                                    v18 = v29;
                                    print_log(1, (int32_t)"programming UTAG \"%s\" as %s.\n", (int32_t)"display", v29, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                    v16 = __utag_puts_constprop_8((int32_t)g5 + 8, v17, g27, v18, v9, 0, str);
                                    if (v16 == NULL) {
                                        // 0x8f633a60
                                        v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                                        g27 = (int32_t)"display";
                                        print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                        // branch -> 0x8f633ab8
                                    } else {
                                        // 0x8f633a74
                                        if (__utags_flush(0, v17, g27, v18, v9, 0, str, 0) != 0) {
                                            // 0x8f633a60
                                            v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                                            g27 = (int32_t)"display";
                                            print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                            // branch -> 0x8f633ab8
                                        }
                                    }
                                    // 0x8f633ab8
                                    v28 = g5;
                                    if (v28 == NULL) {
                                        // 0x8f633ac4
                                        print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                        // branch -> 0x8f633ad8
                                    } else {
                                        // 0x8f633ad4
                                        init_panel_power_list((int32_t)v28, v17, g27, v18, v9, 0, str, 0);
                                        // branch -> 0x8f633ad8
                                    }
                                    // 0x8f633ad8
                                    // branch -> 0x8f633adc
                                    // 0x8f633adc
                                    if (v2 != g18) {
                                        // 0x8f633aec
                                        __stack_chk_fail();
                                        // branch -> 0x8f633af0
                                    }
                                    // 0x8f633af0
                                    return (int32_t)g5;
                                }
                                // 0x8f633ab8
                                v28 = g5;
                                if (v28 == NULL) {
                                    // 0x8f633ac4
                                    print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                                    // branch -> 0x8f633ad8
                                } else {
                                    // 0x8f633ad4
                                    init_panel_power_list((int32_t)v28, (int32_t)"Only one panel driver installed, using it by default\n", g27, v18, v9, 0, str, 0);
                                    // branch -> 0x8f633ad8
                                }
                                int32_t v41 = (int32_t)g5;
                                v6 = v41;
                                v7 = v41;
                                // branch -> 0x8f633adc
                            }
                            // 0x8f633adc
                            if (v2 != g18) {
                                // 0x8f633aec
                                __stack_chk_fail();
                                result = v6;
                                // branch -> 0x8f633af0
                            } else {
                                result = v7;
                            }
                            // 0x8f633af0
                            return result;
                        }
                        // 0x8f633914
                        if (get_current_boot_mode(v36, (int32_t)"bare_board", g27, v18) == 4) {
                            // 0x8f633920
                            // branch -> 0x8f633928
                            // 0x8f633928
                            print_log(1, (int32_t)"UTAG bare board takes control!\n", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                            // branch -> 0x8f633adc
                            // 0x8f633adc
                            if (v2 != g18) {
                                // 0x8f633aec
                                __stack_chk_fail();
                                // branch -> 0x8f633af0
                            }
                            // 0x8f633af0
                            return 0;
                        }
                    }
                }
            }
            // 0x8f633934
            v23 = g6;
            g29 = &g19;
            if (v23 < 2) {
                // 0x8f633a9c
                print_log(1, (int32_t)"Only one panel driver installed, using it by default\n", g27, v23, v9, 0, str, 0, 0, 0, 0, 0, 0);
                // branch -> 0x8f633aa8
                // 0x8f633aa8
                v32 = g20;
                v11 = v32 == g29 ? 0 : v32;
                v18 = v11;
                *(int32_t *)g30 = v11;
                // branch -> 0x8f633ab8
            } else {
                // 0x8f633944
                g33 = &g3;
                v30 = v23 | 0xffff;
                v18 = v30;
                v24 = g3;
                g27 = v24;
                if (v24 == v30) {
                    // 0x8f633958
                    v12 = &str;
                    v14 = __utag_gets_constprop_6_14(v12, 33, v30, v30, v9, 0, str, 0, 0, 0, 0, 0, 0, 0);
                    if (v14 == 0) {
                        // 0x8f6339b0
                        v17 = (int32_t)"UTAG \"%s\" not programmed, use 1st panel\n";
                        v20 = (int32_t)"display";
                        // branch -> 0x8f633a94
                        // 0x8f633a94
                        g27 = v20;
                        print_log(1, (int32_t)"UTAG \"%s\" not programmed, use 1st panel\n", v20, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                        // branch -> 0x8f633aa8
                        // 0x8f633aa8
                        v32 = g20;
                        v11 = v32 == g29 ? 0 : v32;
                        v18 = v11;
                        *(int32_t *)g30 = v11;
                        // branch -> 0x8f633ab8
                    } else {
                        // 0x8f633970
                        v17 = (int32_t)"Searching panel driver for: %s\n";
                        g27 = v12;
                        print_log(1, (int32_t)"Searching panel driver for: %s\n", v12, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                        v21 = g20;
                        v19 = v21;
                        if (v21 != g29) {
                            // 0x8f633988
                            // branch -> 0x8f633988
                            while (true) {
                                // 0x8f633988
                                len = strlen((char *)&str);
                                g27 = len;
                                if (strncmp((char *)(v19 + 8), (char *)&str, len) == 0) {
                                    goto lab_if_8f6339a4_0_true;
                                }
                                goto lab_after_if_8f6339a4_0;
                            }
                        }
                    }
                    // 0x8f633ab8
                    v28 = g5;
                    if (v28 == NULL) {
                        // 0x8f633ac4
                        print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                        // branch -> 0x8f633ad8
                    } else {
                        // 0x8f633ad4
                        init_panel_power_list((int32_t)v28, v17, g27, v18, v9, 0, str, 0);
                        // branch -> 0x8f633ad8
                    }
                    // 0x8f633ad8
                    // branch -> 0x8f633adc
                    // 0x8f633adc
                    if (v2 != g18) {
                        // 0x8f633aec
                        __stack_chk_fail();
                        // branch -> 0x8f633af0
                    }
                    // 0x8f633af0
                    return (int32_t)g5;
                }
                // 0x8f6339bc
                g23 = (int32_t)"Searching panel driver for supplier ID: 0x%x\n";
                print_log(1, (int32_t)"Searching panel driver for supplier ID: 0x%x\n", v24, v30, v9, 0, str, 0, 0, 0, 0, 0, 0);
                v22 = g20;
                g31 = v22;
                if (v22 != g29) {
                    while (true) {
                        // 0x8f6339d4
                        v31 = *(int32_t *)(v22 + 560);
                        g28 = v31;
                        v25 = g3;
                        g22 = v25;
                        g21 = -0x709cc620;
                        ((int32_t (*)(int32_t, int32_t))v31)(v25, v31);
                        if (g22 == 0) {
                            goto lab_if_8f6339e8_0_true;
                        }
                        // if_8f6339e4_0_true
                        *(int32_t *)g30 = g31;
                        // branch -> 0x8f6339f0
                    }
                }
                // 0x8f6339f0
                v26 = g5;
                v27 = (int32_t)v26;
                if (v26 == NULL) {
                    // 0x8f633a88
                    v20 = g3;
                    // branch -> 0x8f633a94
                    // 0x8f633a94
                    g27 = v20;
                    print_log(-1, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", v20, v27, v9, 0, str, 0, 0, 0, 0, 0, 0);
                    // branch -> 0x8f633aa8
                    // 0x8f633aa8
                    v32 = g20;
                    v11 = v32 == g29 ? 0 : v32;
                    v18 = v11;
                    *(int32_t *)g30 = v11;
                    // branch -> 0x8f633ab8
                    // 0x8f633ab8
                    v28 = g5;
                    if (v28 == NULL) {
                        // 0x8f633ac4
                        print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                        // branch -> 0x8f633ad8
                    } else {
                        // 0x8f633ad4
                        init_panel_power_list((int32_t)v28, (int32_t)"Cannot find panel for supplier ID 0x%x, use 1st panel\n", g27, v18, v9, 0, str, 0);
                        // branch -> 0x8f633ad8
                    }
                    // 0x8f633ad8
                    // branch -> 0x8f633adc
                    // 0x8f633adc
                    if (v2 != g18) {
                        // 0x8f633aec
                        __stack_chk_fail();
                        // branch -> 0x8f633af0
                    }
                    // 0x8f633af0
                    return (int32_t)g5;
                }
                // 0x8f6339fc
                v13 = &str;
                v15 = __utag_gets_constprop_6_14(v13, 32, v24, v27, v9, 0, str, 0, 0, 0, 0, 0, 0, 0);
                if (v15 != 0) {
                    // 0x8f633a10
                    len2 = strlen((char *)&str);
                    v18 = (int32_t)&g5;
                    g27 = len2;
                    strncmp_rc = strncmp((char *)((int32_t)g5 + 8), (char *)&str, len2);
                    if (strncmp_rc == 0) {
                        // 0x8f633ab8
                        v28 = g5;
                        if (v28 == NULL) {
                            // 0x8f633ac4
                            print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                            // branch -> 0x8f633ad8
                        } else {
                            // 0x8f633ad4
                            init_panel_power_list((int32_t)v28, v13, g27, v18, v9, 0, str, 0);
                            // branch -> 0x8f633ad8
                        }
                        // 0x8f633ad8
                        // branch -> 0x8f633adc
                        // 0x8f633adc
                        if (v2 != g18) {
                            // 0x8f633aec
                            __stack_chk_fail();
                            // branch -> 0x8f633af0
                        }
                        // 0x8f633af0
                        return (int32_t)g5;
                    }
                }
                // 0x8f633a38
                v17 = (int32_t)"programming UTAG \"%s\" as %s.\n";
                g27 = (int32_t)"display";
                v29 = g31 + 8;
                v18 = v29;
                print_log(1, (int32_t)"programming UTAG \"%s\" as %s.\n", (int32_t)"display", v29, v9, 0, str, 0, 0, 0, 0, 0, 0);
                v16 = __utag_puts_constprop_8((int32_t)g5 + 8, v17, g27, v18, v9, 0, str);
                if (v16 == NULL) {
                    // 0x8f633a60
                    v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                    g27 = (int32_t)"display";
                    print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                    // branch -> 0x8f633ab8
                } else {
                    // 0x8f633a74
                    if (__utags_flush(0, v17, g27, v18, v9, 0, str, 0) != 0) {
                        // 0x8f633a60
                        v17 = (int32_t)"Failed to program UTAG \"%s\"!\n";
                        g27 = (int32_t)"display";
                        print_log(0, (int32_t)"Failed to program UTAG \"%s\"!\n", (int32_t)"display", v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                        // branch -> 0x8f633ab8
                    }
                }
                // 0x8f633ab8
                v28 = g5;
                if (v28 == NULL) {
                    // 0x8f633ac4
                    print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                    // branch -> 0x8f633ad8
                } else {
                    // 0x8f633ad4
                    init_panel_power_list((int32_t)v28, v17, g27, v18, v9, 0, str, 0);
                    // branch -> 0x8f633ad8
                }
                // 0x8f633ad8
                // branch -> 0x8f633adc
                // 0x8f633adc
                if (v2 != g18) {
                    // 0x8f633aec
                    __stack_chk_fail();
                    // branch -> 0x8f633af0
                }
                // 0x8f633af0
                return (int32_t)g5;
            }
            // 0x8f633ab8
            v28 = g5;
            if (v28 == NULL) {
                // 0x8f633ac4
                print_log(-1, (int32_t)"Display panel driver not found!", g27, v18, v9, 0, str, 0, 0, 0, 0, 0, 0);
                // branch -> 0x8f633ad8
            } else {
                // 0x8f633ad4
                init_panel_power_list((int32_t)v28, (int32_t)"Only one panel driver installed, using it by default\n", g27, v18, v9, 0, str, 0);
                // branch -> 0x8f633ad8
            }
            // 0x8f633ad8
            // branch -> 0x8f633adc
            // 0x8f633adc
            if (v2 != g18) {
                // 0x8f633aec
                __stack_chk_fail();
                // branch -> 0x8f633af0
            }
            // 0x8f633af0
            return (int32_t)g5;
        }
        int32_t v42 = &g6; // 0x8f633928
        // branch -> 0x8f633928
        // 0x8f633928
        print_log(0, (int32_t)"No panel driver installed!\n", g27, v42, v9, 0, v1, 0, 0, 0, 0, 0, 0);
        v6 = 0;
        v7 = 0;
        // branch -> 0x8f633adc
    } else {
        // if_8f63389c_0_true
        v6 = v4;
        v7 = v4;
        // branch -> 0x8f633adc
    }
    // 0x8f633adc
    if (v2 != g18) {
        // 0x8f633aec
        __stack_chk_fail();
        result = v6;
        // branch -> 0x8f633af0
    } else {
        result = v7;
    }
    // 0x8f633af0
    return result;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// int atoi(const char * nptr);
// void * calloc(size_t nmemb, size_t size);
// void free(void * ptr);
// void * malloc(size_t size);
// int memcmp(const void * s1, const void * s2, size_t n);
// void * memcpy(void * restrict dest, const void * restrict src, size_t n);
// void * memset(void * s, int c, size_t n);
// int strcmp(const char * s1, const char * s2);
// size_t strlen(const char * s);
// int strncmp(const char * s1, const char * s2, size_t n);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 30
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 19:31:13
