//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>

// ------------------- Function Prototypes --------------------

int32_t __utag_is_protected(int32_t a1, int32_t a2);
int32_t __utag_unprotect(int32_t a1, int32_t a2, int32_t a3);
int32_t bq24296_get_ibuslim(int32_t a1, int32_t a2);
int32_t dbval_memcmp_value(int32_t a1, int32_t a2, int32_t a3);
int32_t dbval_sigreq_create_outer(char * a1, int32_t a2, int32_t a3);
int32_t display_get_left_lines(int32_t a1);
int32_t display_get_total_lines(int32_t a1, int32_t a2);
int32_t fan54046_modify(int32_t a1, int32_t a2, int32_t a3);
int32_t font_draw_char(int32_t a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t font_draw_char_horizontal(int32_t a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t font_get_x(int32_t a1, int32_t a2, int32_t a3);
int32_t font_get_y(int32_t a1, int32_t a2, int32_t a3);
void function_8f64b000(void);
void function_8f64b05c(char * a1, uint32_t a2, int32_t a3);
int32_t mcs_ctx_init_rng(int32_t a1, int32_t a2, int32_t a3, char * a4);
int32_t mcs_return_rng_data(char * a1, int32_t a2, int32_t a3);
int32_t mdp_get_revision(int32_t a1, int32_t a2, int32_t a3);
int32_t mdss_mdp_intf_offset(int32_t a1);
int32_t mipi_cmd_trigger(int32_t a1, int32_t a2);
int32_t mipi_dsi_cmdmode_enable(void);
int32_t panel_manager_get_panel_hbm_feat(void);
int32_t panel_manager_set_panel_hbm_feat(char a1, int32_t a2, int32_t a3);
int32_t sod_ramdump_enable(void);
int32_t sod_ramdump_pending_pull(int32_t a1, int32_t a2, int32_t a3);
int32_t tps65132_config(int32_t a1, int32_t a2, int32_t a3);
int32_t tps65132_init(int32_t a1);
int32_t ufs_get_page_size(int32_t a1);
int32_t ufs_get_serial_num(int32_t a1);

// --------------------- Global Variables ---------------------

int32_t g12 = 0; // LR
int32_t g13 = 0; // R0
int32_t g14 = 0; // R1
int32_t g15 = 0; // R12
int32_t g16 = 0; // R2
int32_t g17 = 0; // R3
int32_t g18 = 0; // R4
int32_t g19 = 0; // R5
int32_t g20 = 0; // R6
int32_t g21 = 0; // R7
int32_t g22 = 0; // R8
int32_t g23 = 0; // R9
int32_t g1 = 1; // 0x8f6ac0f0
char * g2 = "\x01"; // 0x8f6ac21c
int32_t g3 = 0; // 0x8f6b8af8
char * g4; // 0x8f6e0794
int32_t g5 = 0; // 0x8f6e0aa0
int32_t g6 = 0; // 0x8f6e0aac
int32_t g7 = 0; // 0x8f6e0bd8
int32_t g8 = 0; // 0x8f6e0bdc
int32_t g9 = 0; // 0x8f6e0be0
int32_t g10 = 0; // 0x8f6e0be4
int32_t g11 = 0; // 0x8f7112f4

// ------------------------ Functions -------------------------

// Address range: 0x8f6480e4 - 0x8f64829b
int32_t tps65132_init(int32_t a1) {
    int32_t v1 = g14; // bp-28
    int32_t v2 = g16; // bp-24
    int32_t v3 = g18; // 0x8f6480e4
    int32_t v4 = a1; // R1
    int32_t v5 = &g11; // R2
    int32_t v6 = g11;
    int32_t v7 = &g9; // R6
    int32_t v8; // R0
    int32_t result; // 0x8f648264_2
    int32_t v9; // 0x8f648264_26
    if (g9 == 0) {
        int32_t v10 = get_subnode_offset((int32_t)"regulator_tps65132", a1, (int32_t)&g11, (int32_t)&g9); // 0x8f64811c
        int32_t v11 = v10; // R4
        int32_t v12; // 0x8f648228
        int32_t v13;
        int32_t v14; // 0x8f648218_0
        int32_t v15; // 0x8f64821c_0
        if (v10 > -1) {
            // 0x8f64813c
            v4 = v10;
            int32_t v16 = &v1; // 0x8f648144_0
            v5 = v16;
            int32_t v17 = get_int_prop((int32_t)"blsp", v10, v16, (int32_t)&g9, a1, g14, g16); // 0x8f648148
            if (v17 == 0) {
                int32_t v18 = v11; // 0x8f648158
                v4 = v18;
                int32_t v19 = &v2; // 0x8f64815c_0
                v5 = v19;
                int32_t v20 = get_int_prop((int32_t)"qup", v18, v19, (int32_t)&g9, a1, v1, v2); // 0x8f648160
                if (v20 == 0) {
                    int32_t v21 = v11; // 0x8f648170
                    v4 = v21;
                    v5 = &g7;
                    int32_t v22 = get_int_prop((int32_t)"vpos", v21, (int32_t)&g7, (int32_t)&g9, a1, v1, v2); // 0x8f648178
                    if (v22 == 0) {
                        int32_t v23 = v11; // 0x8f648188
                        v4 = v23;
                        v5 = &g8;
                        int32_t v24 = get_int_prop((int32_t)"vneg", v23, (int32_t)&g8, (int32_t)&g9, a1, v1, v2); // 0x8f648190
                        if (v24 == 0) {
                            // 0x8f648218
                            v14 = v1;
                            v15 = v2;
                            v12 = qup_blsp_i2c_init(0x1000000 * v14 / 0x1000000, 0x1000000 * v15 / 0x1000000, 0x61a80, 0x124f800, a1, v14, v15, v6, v3, g19, g20, g12, v13, 0, 0, 0, 0);
                            *(int32_t *)v7 = v12;
                            if (v12 == 0) {
                                // 0x8f648238
                                print_log(-1, (int32_t)"Failed initializing i2c for %s\n", (int32_t)"regulator_tps65132", 0x124f800, a1, v1, v2, v6, v3, g19, g20, g12, v13);
                                v8 = -20;
                                v9 = -20;
                                // branch -> 0x8f64824c
                            } else {
                                // 0x8f648110
                                v8 = 0;
                                v9 = 0;
                                // branch -> 0x8f64824c
                            }
                            // 0x8f64824c
                            if (v6 != g11) {
                                // 0x8f64825c
                                __stack_chk_fail();
                                result = v8;
                                // branch -> 0x8f648260
                            } else {
                                result = v9;
                            }
                            // 0x8f648260
                            g18 = v3;
                            return result;
                        }
                    }
                }
            }
        }
        int32_t v25 = mbm_fdt_find_node((int32_t)"regulator_tps65132", v4, v5); // 0x8f64812c
        v11 = v25;
        if (v25 > -1) {
            int32_t v26 = get_int_prop((int32_t)"blsp", v25, (int32_t)&v1, (int32_t)&g9, a1, v1, v2); // 0x8f6481ac
            if (v26 == 0) {
                int32_t v27 = get_int_prop((int32_t)"qup", v11, (int32_t)&v2, (int32_t)&g9, a1, v1, v2); // 0x8f6481dc
                if (v27 == 0) {
                    int32_t v28 = get_int_prop((int32_t)"vpos", v11, (int32_t)&g7, (int32_t)&g9, a1, v1, v2); // 0x8f6481f4
                    if (v28 == 0) {
                        int32_t v29 = get_int_prop((int32_t)"vneg", v11, (int32_t)&g8, (int32_t)&g9, a1, v1, v2); // 0x8f64820c
                        if (v29 == 0) {
                            // 0x8f648218
                            v14 = v1;
                            v15 = v2;
                            v12 = qup_blsp_i2c_init(0x1000000 * v14 / 0x1000000, 0x1000000 * v15 / 0x1000000, 0x61a80, 0x124f800, a1, v14, v15, v6, v3, g19, g20, g12, v13, 0, 0, 0, 0);
                            *(int32_t *)v7 = v12;
                            if (v12 == 0) {
                                // 0x8f648238
                                print_log(-1, (int32_t)"Failed initializing i2c for %s\n", (int32_t)"regulator_tps65132", 0x124f800, a1, v1, v2, v6, v3, g19, g20, g12, v13);
                                v8 = -20;
                                v9 = -20;
                                // branch -> 0x8f64824c
                            } else {
                                // 0x8f648110
                                v8 = 0;
                                v9 = 0;
                                // branch -> 0x8f64824c
                            }
                            // 0x8f64824c
                            if (v6 != g11) {
                                // 0x8f64825c
                                __stack_chk_fail();
                                result = v8;
                                // branch -> 0x8f648260
                            } else {
                                result = v9;
                            }
                            // 0x8f648260
                            g18 = v3;
                            return result;
                        }
                    }
                }
            }
        }
        // 0x8f6481b8
        print_log(-1, (int32_t)"DT settings for \"%s\" missing or incomplete\n", (int32_t)"regulator_tps65132", (int32_t)&g9, a1, v1, v2, v6, v3, g19, g20, g12, v13);
        v8 = -1;
        v9 = -1;
        // branch -> 0x8f64824c
    } else {
        // 0x8f648110
        v8 = 0;
        v9 = 0;
        // branch -> 0x8f64824c
    }
    // 0x8f64824c
    if (v6 != g11) {
        // 0x8f64825c
        __stack_chk_fail();
        result = v8;
        // branch -> 0x8f648260
    } else {
        result = v9;
    }
    // 0x8f648260
    g18 = v3;
    return result;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// void * calloc(size_t nmemb, size_t size);
// void free(void * ptr);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 28
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 19:20:53
