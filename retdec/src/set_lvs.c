//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>

// ------------------- Function Prototypes --------------------

int32_t set_ldo(int32_t * a1, int32_t a2);
int32_t set_lvs(char * a1, int32_t a2);

// --------------------- Global Variables ---------------------

int32_t g2 = 0; // R4
int32_t g3 = 0; // R5
int32_t g4 = 0; // R6
int32_t g1 = 0; // 0x8f7112f4

// ------------------------ Functions -------------------------

// Address range: 0x8f617ef8 - 0x8f617fcb
int32_t set_lvs(char * a1, int32_t a2) {
    int32_t v1 = (int32_t)a1;
    int32_t v2 = (int32_t)"set"; // R2
    int32_t v3 = g1;
    int32_t v4 = (int32_t)"set"; // 0x8f617f2c
    if (a2 != 0) {
        // if_8f617f24_0_true
        v2 = (int32_t)"clear";
        v4 = (int32_t)"clear";
        // branch -> after_if_8f617f24_0
    }
    int32_t v5 = *(int32_t *)a1; // 0x8f617f28
    int32_t v6;
    print_log(2, (int32_t)"%s lvs: lvs=%d\n", v4, v5, v1, v3, g2, g3, g4, 0, v6, 0, 0);
    uint32_t v7 = *(int32_t *)(v1 + 4); // 0x8f617f30
    uint32_t v8 = v7 - 1; // 0x8f617f34
    int32_t v9;
    int32_t v10; // 0x8f617f58
    char v11; // 0x8f617f54
    int32_t result; // 0x8f617f60
    if (v8 <= 8) {
        // 0x8f617f40
        mdelay(v7, (int32_t)"%s lvs: lvs=%d\n", v2, v8);
        // branch -> 0x8f617f54
        // 0x8f617f54
        v11 = *(char *)v1;
        v10 = a2 ^ 1;
        pm8x41_lvs_enable((int32_t)v11, v10, v2, v8, v1);
        result = *(int32_t *)(v1 + 8);
        v9 = g1;
        if (result > 9) {
            // 0x8f617f8c
            if (result < 10) {
                // 0x8f617fa8
                if (v3 == v9) {
                    // 0x8f617fb4
                    return result;
                }
            } else {
                // 0x8f617f94
                if (v3 == v9) {
                    // 0x8f617f9c
                    return thread_sleep(result, v10, v3, v3, g2, g3, g4, 0);
                }
            }
            // 0x8f617fb0
            __stack_chk_fail();
            // branch -> 0x8f617fb4
        } else {
            // 0x8f617f78
            if (v3 == v9) {
                // 0x8f617f80
                return mdelay(result, v10, v3, v3);
            }
            // 0x8f617fb0
            __stack_chk_fail();
            // branch -> 0x8f617fb4
        }
        // 0x8f617fb4
        return result;
    }
    // 0x8f617f48
    if (v7 >= 10) {
        // 0x8f617f50
        thread_sleep(v7, (int32_t)"%s lvs: lvs=%d\n", v2, v8, v1, v3, g2, g3);
        // branch -> 0x8f617f54
    }
    // 0x8f617f54
    v11 = *(char *)v1;
    v10 = a2 ^ 1;
    pm8x41_lvs_enable((int32_t)v11, v10, v2, v8, v1);
    result = *(int32_t *)(v1 + 8);
    v9 = g1;
    if (result > 9) {
        // 0x8f617f8c
        if (result < 10) {
            // 0x8f617fa8
            if (v3 == v9) {
                // 0x8f617fb4
                return result;
            }
        } else {
            // 0x8f617f94
            if (v3 == v9) {
                // 0x8f617f9c
                return thread_sleep(result, v10, v3, v3, g2, g3, g4, 0);
            }
        }
        // 0x8f617fb0
        __stack_chk_fail();
        // branch -> 0x8f617fb4
    } else {
        // 0x8f617f78
        if (v3 == v9) {
            // 0x8f617f80
            return mdelay(result, v10, v3, v3);
        }
        // 0x8f617fb0
        __stack_chk_fail();
        // branch -> 0x8f617fb4
    }
    // 0x8f617fb4
    return result;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 2
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 07:49:59
