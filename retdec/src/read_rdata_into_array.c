//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

int32_t read_rdata_into_array(int32_t a1, int32_t a2, int32_t a3, char * a4);
int32_t spmi_init(int32_t result2, int32_t a2, int32_t a3);

// --------------------- Global Variables ---------------------

int32_t g1 = 255; // 0x8f67f630
char * g2; // 0x8f67f640
int32_t g3 = 0; // 0x8f6b8afc
int32_t g4 = 0; // 0x8f6b8b00
int32_t g5 = 0; // 0x8f6b8b04
int32_t g6 = 0; // 0x8f6b8b08
int32_t g7 = 0; // 0x8f6b8b0c
int32_t g8 = 0; // 0x8f6b8b10
int32_t g9 = 0; // 0x8f7112f4

// ------------------------ Functions -------------------------

// Address range: 0x8f611988 - 0x8f611a53
int32_t read_rdata_into_array(int32_t a1, int32_t a2, int32_t a3, char * a4) {
    int32_t v1 = (int32_t)a4; // R5
    int32_t v2; // bp-56
    int32_t v3 = &v2; // R4
    v2 = g1;
    int32_t v4;
    char * dest_mem = memcpy((char *)&v4, (char *)&g2, 4); // 0x8f6119d0
    int32_t v5 = *(int32_t *)(4 * a2 + 0x8000 * g5 + 0x2c00018); // 0x8f6119ec
    int32_t v6 = 0; // R1
    // branch -> 0x8f6119f4
    while (true) {
        uint32_t v7 = (int32_t)*(char *)v1; // 0x8f6119f4
        if (v7 >= a3) {
            int32_t v8 = v6; // 0x8f611a00
            int32_t v9 = *(int32_t *)(4 * v8 + v3); // 0x8f611a00
            int32_t v10 = v8 + 1; // 0x8f611a08
            v6 = v10;
            uint32_t v11 = (int32_t)*(char *)((int32_t)dest_mem + v8) % 256; // 0x8f611a14
            uint32_t v12 = v11 > 32 ? 32 : v11; // 0x8f611a14
            *(char *)(a1 + v7) = (char)((v5 & v9) >> v12);
            char * v13 = (char *)v1; // 0x8f611a1c_0
            *v13 = *v13 + 1;
            if (v10 == 4) {
                // break -> 0x8f611a2c
                break;
            }
            // continue -> 0x8f6119f4
            continue;
        }
        // 0x8f611a40
        return g9;
    }
    // 0x8f611a40
    return g9;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// void * malloc(size_t size);
// void * memcpy(void * restrict dest, const void * restrict src, size_t n);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 2
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 07:00:48
