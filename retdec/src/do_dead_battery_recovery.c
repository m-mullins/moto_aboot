//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdio.h>
#include <stdlib.h>
#include <string.h>
#include <time.h>

// ------------------------ Structures ------------------------

struct tm {
    int32_t e0;
    int32_t e1;
    int32_t e2;
    int32_t e3;
    int32_t e4;
    int32_t e5;
    int32_t e6;
    int32_t e7;
    int32_t e8;
    int32_t e9;
    char * e10;
};

// ------------------- Function Prototypes --------------------

int32_t __utag_gets_107(char * a1, char * a2, int32_t a3, int32_t a4);
int32_t __utag_sizeof(char * a1, int32_t a2, int32_t a3);
int32_t _dputc(char a1, int32_t a2);
int32_t board_baseband(int32_t a1);
int32_t board_hardware_id(int32_t a1, int32_t a2, int32_t a3);
int32_t boot_linux(int32_t (*a1)(int32_t, int32_t, int32_t), int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t bs_set_timestamp(int32_t a1);
int32_t build_sig_for_all(char * str, int32_t (*a2)(int32_t, int32_t), int32_t a3);
int32_t build_sig_is_uniform(void);
int32_t dev_tree_add_mem_info(int32_t a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t dev_tree_get_entry_info(int32_t a1, int32_t * a2);
int32_t disable_usbin_valid_irq(int32_t a1);
int32_t do_dead_battery_recovery(int32_t a1, int32_t a2, int32_t a3);
int32_t enable_usbin_valid_irq(int32_t a1, int32_t a2);
void function_8f64aa80(void);
void function_8f64aacc(int32_t a1, int32_t a2, int32_t a3);
void function_8f678528(void);
void function_8f6786f0(int32_t * timep, int32_t a2, int32_t a3);
int32_t get_udc_device(char * a1, int32_t a2, int32_t a3, int32_t a4);
int32_t get_ui_coordinates(int32_t a1, int32_t a2);
int32_t init(int32_t a1, int32_t a2, int32_t a3);
int32_t is_fastboot_busy(int32_t a1, int32_t a2, int32_t a3);
int32_t mdss_dsi_phy_regulator_init(int32_t * a1, int32_t a2);
int32_t mdss_dsi_phy_sw_reset(int32_t a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t on_confirm_timeout(int32_t a1, int32_t a2, char * a3);
int32_t select_device_tree(int32_t a1, int32_t a2);
int32_t start_charging(int32_t a1);
int32_t stop_charging(int32_t a1, int32_t a2);
int32_t target_platform_id(char * a1, int32_t a2, int32_t a3);
int32_t target_restart_reason_addr(int32_t a1, int32_t a2);

// --------------------- Global Variables ---------------------

int32_t g58 = 0; // LR
int32_t g59 = 0; // R0
int32_t g60 = 0; // R1
int32_t g61 = 0; // R10
int32_t g62 = 0; // R11
int32_t g63 = 0; // R2
int32_t g64 = 0; // R3
int32_t g65 = 0; // R4
int32_t g66 = 0; // R5
int32_t g67 = 0; // R6
int32_t g68 = 0; // R7
int32_t g69 = 0; // R8
int32_t g70 = 0; // R9
int32_t g1 = -0x1a60cfd8; // 0x8f603944
int32_t g2 = -0x1a60cfd0; // 0x8f603978
int32_t g3 = -0x16d2bfc9; // 0x8f603ad8
int32_t g4 = -0x16d2bfc9; // 0x8f603c64
int32_t g5 = -0x1a60cd10; // 0x8f637e98
int32_t g6 = -0x1a60cf7c; // 0x8f63867c
int32_t g7 = -0x16d2bfc9; // 0x8f6387c0
int32_t (*g8)() = (int32_t (*)())-0x16d2bf8d; // 0x8f64338c
int32_t g9 = -0x16d2bf8d; // 0x8f64385c
int32_t g10 = -0x16d2bf8d; // 0x8f645798
int32_t g11 = -0x16d2bf10; // 0x8f651560
int32_t g12 = 0x2020003a; // 0x8f686ac4
int32_t g13 = 0x65440030; // 0x8f69c66f
char * g14 = "S"; // 0x8f6a4aed
char * g15; // 0x8f6a4e20
int32_t g16 = 31; // 0x8f6a9020
int32_t g17 = 365; // 0x8f6a9080
char * g18 = "\x01"; // 0x8f6ab02c
int32_t g19 = 0x1000; // 0x8f6ab03c
int32_t g20 = 0; // 0x8f6ab040
int32_t g21 = 0; // 0x8f6ab044
int32_t g22 = 0; // 0x8f6ab048
int32_t g23 = 0x2e8022b8; // 0x8f6ac050
char * g24; // 0x8f6ac05c
int32_t g25 = 0; // 0x8f6ac074
int32_t g26 = 0; // 0x8f6ac080
int32_t g27 = -1; // 0x8f6ac0c0
int32_t g28 = 1; // 0x8f6ac0f0
int32_t g29 = 1; // 0x8f6afe1c
int32_t g30 = 0; // 0x8f6b5064
int32_t g31 = 0; // 0x8f6b5080
char * g32; // 0x8f6b509c
int32_t g33 = 0; // 0x8f6b50a0
int32_t g34 = 0; // 0x8f6b7950
char * g35; // 0x8f6b7954
int32_t g36 = 0; // 0x8f6b8bdc
int32_t g37 = 0; // 0x8f6b8be0
int32_t g38 = 0; // 0x8f6b8be4
int32_t g39 = 0; // 0x8f6b8be8
int32_t g40 = 0; // 0x8f6b8bec
int32_t g41 = 0; // 0x8f6c0398
int32_t g42 = 0; // 0x8f6c03d0
int32_t g43 = 0; // 0x8f6e07ac
int32_t g44 = 0; // 0x8f6e07cc
int32_t g45 = 0; // 0x8f6e07e8
int32_t g46 = 0; // 0x8f6e07ec
int32_t g47 = 0; // 0x8f6e07f4
int32_t g48 = 0; // 0x8f6e0808
int32_t g49 = 0; // 0x8f6e080c
char * g50; // 0x8f6e0848
char * g51; // 0x8f6e1000
char * g52; // 0x8f6e1200
int32_t g53 = 0; // 0x8f6e1228
int32_t g54 = 0; // 0x8f6e12dc
int32_t g55 = 0; // 0x8f6e12e0
struct tm * g56 = NULL; // 0x8f710e90
int32_t g57 = 0; // 0x8f7112f4

// ------------------------ Functions -------------------------

// Address range: 0x8f603e48 - 0x8f604343
int32_t do_dead_battery_recovery(int32_t a1, int32_t a2, int32_t a3) {
    int32_t v1 = a2; // R1
    int32_t v2 = g65; // 0x8f603e48
    int32_t v3 = g66; // 0x8f603e48
    int32_t v4 = g67; // 0x8f603e48
    int32_t v5 = g68; // 0x8f603e48
    int32_t v6 = g69; // 0x8f603e48
    int32_t v7 = g57;
    int32_t v8 = v7; // R3
    int32_t v9 = is_battery_max17050(a1, a2, a3, v7); // 0x8f603e5c
    int32_t v10; // 0x8f603e80
    int32_t v11; // 0x8f603e6c
    if (v9 == 0) {
        // 0x8f603e6c
        v11 = is_battery_max17058(0, v1, a3, v8);
        v8 = &g9;
        int32_t v12 = v11 == 0 ? (int32_t)&g1 : (int32_t)&g9;
        g68 = v12;
        v10 = &g9;
        // branch -> 0x8f603e80
    } else {
        // if_8f603e64_0_true
        g68 = (int32_t)&g8;
        v10 = v8;
        v11 = v9;
        // branch -> 0x8f603e80
    }
    int32_t v13 = is_charger_fan54046(v11, v1, a3, v10); // 0x8f603e80
    int32_t v14 = v13; // R6
    int32_t v15; // 0x8f603f14
    int32_t v16; // 0x8f603fb0
    int32_t v17; // 0x8f60428c
    int32_t v18; // 0x8f6042b4
    int32_t v19; // 0x8f604018
    int32_t v20; // 0x8f60404c
    int32_t v21; // 0x8f604018
    int32_t v22; // 0x8f60404c
    int32_t v23; // 0x8f604260
    int32_t v24; // 0x8f604260
    int32_t v25; // 0x8f6042c05
    int32_t v26; // 0x8f6042c06
    int32_t v27; // 0x8f603eac
    int32_t v28; // 0x8f603ef8
    int32_t v29; // 0x8f603f14
    int32_t v30; // 0x8f603f50
    int32_t v31; // 0x8f603f68
    int32_t v32; // 0x8f603f74
    int32_t v33; // 0x8f603fa0
    int32_t v34; // 0x8f603fc4
    int32_t v35; // 0x8f603fc8
    int32_t v36; // 0x8f603ff4
    int32_t v37; // 0x8f603ff8
    int32_t v38; // 0x8f604018
    int32_t v39; // 0x8f60404c
    int32_t v40; // 0x8f60407c
    int32_t v41; // 0x8f604148
    int32_t v42; // 0x8f604250
    int32_t v43; // 0x8f604254
    int32_t v44; // 0x8f604260
    int32_t v45; // 0x8f60426c
    int32_t v46; // 0x8f604298
    int32_t v47; // 0x8f6042b0
    int32_t result2; // 0x8f6042b4
    int32_t result; // 0x8f6042c0
    int32_t v48; // 0x8f603ef0
    int32_t v49;
    int32_t v50;
    int32_t v51;
    int32_t v52;
    int32_t v53;
    int32_t v54;
    int32_t v55; // 0x8f603ff0
    int32_t v56; // 0x8f604040
    int32_t v57; // 0x8f604248
    int32_t v58; // 0x8f603f18
    char v59; // 0x8f6042a0
    int32_t v60; // 0x8f6042a0
    if (v13 == 0) {
        int32_t v61 = is_charger_bq24296(0, v1, a3, v8, v50, 0, 0, v49); // 0x8f603eb4
        int32_t v62; // 0x8f603ef0
        if (v61 == 0) {
            // 0x8f603ed0
            int32_t v63; // 0x8f603ef015
            int32_t v64; // 0x8f603eec
            if (is_charger_smb1359(0, v1, a3, v8, v50, 0, 0, v49) == 0) {
                // if_8f603ed8_0_true
                v14 = 0;
                v63 = 0;
                v64 = 0;
                // branch -> 0x8f603eec
            } else {
                // 0x8f603ee0
                v14 = v61;
                int32_t v65 = smb135x_enable_usbin_valid_irq((int32_t)&g4, v1, a3, v8); // 0x8f603ee8
                v63 = v65;
                v64 = v14;
                // branch -> 0x8f603eec
            }
            // 0x8f603eec
            g65 = v64;
            v62 = v63;
            // branch -> 0x8f603ef0
        } else {
            // 0x8f603ec0
            g65 = 2;
            v62 = bq24296_chg_enable(1, v1, a3, v8, v50, 0, 0, v49);
            // branch -> 0x8f603ef0
        }
        // 0x8f603ef0
        v48 = disable_cont_splash_screen(v62, v1, a3);
        v28 = is_sufficient_pwr_avail(3200, v1, v48, v8, v50, 0, 0, v49, 0, v7, 0, v2, v3, v4, v5);
        if (v28 == 0) {
            // 0x8f603f08
            g66 = 1;
            led_on(2, v1, v48, v8);
            v15 = 2;
            // branch -> 0x8f603f14
        } else {
            // if_8f603f00_0_true
            g66 = 0;
            v15 = v28;
            // branch -> 0x8f603f14
        }
        // 0x8f603f14
        v29 = get_accessory_type(v15, v1);
        v58 = v8 & -0x10000 | 3560;
        g70 = g70 & -0x10000 | 3500;
        if (v29 != 1) {
            // if_8f603f30_0_true
            g70 = v58;
            // branch -> after_if_8f603f30_0
        }
        // after_if_8f603f30_0
        event_init((int32_t)&g30, 0, 1, v58);
        g63 = 0;
        g60 = &g3;
        g64 = 24;
        v30 = thread_create((int32_t)"shutdown handler", (int32_t)&g3, 0, 24, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3, v4, v5, v6);
        if (v30 == 0) {
            // 0x8f603f5c
            g60 = (int32_t)"%s: shutdown handler thread_create fail!\n";
            g63 = (int32_t)"do_dead_battery_recovery";
            v31 = print_log(1, (int32_t)"%s: shutdown handler thread_create fail!\n", (int32_t)"do_dead_battery_recovery", g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
            v51 = v31;
            // branch -> 0x8f603f74
        } else {
            // 0x8f603f70
            v51 = thread_resume(v30, g60, g63, g64, 0x1000, 0, 0, v49);
            // branch -> 0x8f603f74
        }
        // 0x8f603f74
        v32 = is_charger_smb1359(v51, g60, g63, g64, 0x1000, 0, 0, v49);
        if (v32 == 0) {
            // 0x8f603f80
            if (power_source_detected(0, g60, g63, g64) == 0) {
                // 0x8f603f98
                g60 = (int32_t)"Power Source missing, Shutdown device!\n";
                v33 = print_log(1, (int32_t)"Power Source missing, Shutdown device!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                v16 = charger_gone_call_back(v33, g60, g63, g64);
                // branch -> 0x8f603fa8
            } else {
                // 0x8f603f8c
                v16 = enable_usbin_valid_irq((int32_t)&g2, g60);
                // branch -> 0x8f603fa8
            }
            // 0x8f603fa8
            if (g66 == 0) {
                // 0x8f603fb0
                v52 = display_dbr_logo(v16, g60, g63, g64);
                // branch -> 0x8f603fc8
            } else {
                // 0x8f603fb8
                g64 = &g6;
                v34 = turn_on_display(0, g60, g63, (int32_t)&g6, 0x1000, 0, 0, v49);
                v52 = v34;
                // branch -> 0x8f603fc8
            }
            // 0x8f603fc8
            v35 = is_charger_fan54046(v52, g60, g63, g64);
            v19 = g60;
            v21 = g63;
            if (v35 == 0) {
                // 0x8f604018
                v38 = is_charger_bq24296(0, v19, v21, g64, 0x1000, 0, 0, v49);
                v20 = g60;
                v22 = g63;
                if (v38 == 0) {
                    // 0x8f60404c
                    v39 = is_charger_smb1359(0, v20, v22, g64, 0x1000, 0, 0, v49);
                    if (v39 != 0) {
                        // 0x8f604058
                        smb1359_config_fastchg_current(v39, g60, g63, g64);
                        // branch -> 0x8f60405c
                    }
                } else {
                    // 0x8f604024
                    if (is_usb_attached_cdp(v38, v20, v22) == 0) {
                        // 0x8f604034
                        if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                            // 0x8f604034
                            v56 = g65;
                            // branch -> 0x8f604040
                        } else {
                            // if_8f60403c_0_true
                            v56 = 4;
                            // branch -> 0x8f604040
                        }
                        // 0x8f604040
                        bq24296_ibuslim_set(v56, g60, g63, g64, 0x1000, 0, 0);
                        // branch -> 0x8f60405c
                        // 0x8f60405c
                        g60 = (int32_t)"Charging Enabled!\n";
                        print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                        g61 = (int32_t)&g18;
                        g67 = 0;
                        g69 = 0;
                        g65 = 0;
                        v26 = v49;
                        // branch -> 0x8f604078
                        int32_t v66; // 0x8f60413c
                        while (true) {
                          lab_0x8f604078:
                            // 0x8f604078
                            v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                            g59 = v40;
                            if (v40 != 0) {
                              lab_0x8f604234_19:
                                // 0x8f604234
                                g58 = -0x709fbdc8;
                                ((int32_t (*)())g68)();
                                if (g59 >= 2) {
                                    v25 = v26;
                                    // 0x8f604240
                                    g58 = -0x709fbdbc;
                                    ((int32_t (*)())g68)();
                                    v57 = g59;
                                    g63 = v57;
                                    v42 = print_log(1, (int32_t)"Cap has moved by %d percent\n", v57, g64, 0x1000, 0, 0, v25, 0, v7, 0, v2, v3);
                                    v43 = is_charger_smb1359(v42, (int32_t)"Cap has moved by %d percent\n", g63, g64, 0x1000, 0, 0, v25);
                                    v23 = g63;
                                    v24 = g64;
                                    if (v43 == 0) {
                                        // 0x8f604260
                                        v44 = disable_charger_gone_irq(0, (int32_t)"Cap has moved by %d percent\n", v23, v24);
                                        v53 = disable_usbin_valid_irq(v44);
                                        // branch -> 0x8f604290
                                    } else {
                                        // 0x8f60426c
                                        v45 = is_hv_charger_present(v43, (int32_t)"Cap has moved by %d percent\n", v23, v24);
                                        v17 = 0;
                                        if (v45 != 0) {
                                            // 0x8f604278
                                            if (get_accessory_type(v45, (int32_t)"Cap has moved by %d percent\n") != 9) {
                                                // 0x8f604284
                                                g63 = set_accessory_type(9, (int32_t)"Cap has moved by %d percent\n");
                                                v17 = 9;
                                                // branch -> 0x8f60428c
                                            } else {
                                                v17 = 9;
                                            }
                                        }
                                        // 0x8f60428c
                                        v53 = smb135x_disable_usbin_valid_irq(v17, (int32_t)"Cap has moved by %d percent\n");
                                        // branch -> 0x8f604290
                                    }
                                    // 0x8f604290
                                    v46 = stop(v53, (int32_t)"Cap has moved by %d percent\n", g63, (int32_t)&g7, 0x1000, 0);
                                    v59 = *(char *)&g32;
                                    v60 = v59;
                                    v18 = v46;
                                    if (v59 != 0) {
                                        // 0x8f6042ac
                                        v47 = timer_cancel((int32_t)&g31, (int32_t)"Cap has moved by %d percent\n", g63, v60, 0x1000, 0, 0, v25);
                                        v18 = v47;
                                        // branch -> 0x8f6042b4
                                    }
                                    // 0x8f6042b4
                                    result2 = is_display_on(v18);
                                    g59 = result2;
                                    if (result2 == 0) {
                                        // 0x8f6042c0
                                        result = display_turn_on(0, (int32_t)"Cap has moved by %d percent\n", g63, v60, 0x1000, 0, 0, v25);
                                        g59 = result;
                                        return result;
                                    }
                                    // 0x8f6042c4
                                    if (v7 == g57) {
                                        // 0x8f6042dc
                                        enable_cont_splash_screen(result2, (int32_t)&g57);
                                        return result2;
                                    }
                                    // 0x8f6042d8
                                    __stack_chk_fail();
                                    return result2;
                                }
                            }
                          lab_0x8f604088_19:;
                            uint32_t v67 = g69; // 0x8f604088
                            int32_t v68 = v67 / 60;
                            uint32_t v69 = v67 % 60;
                            int32_t v70 = v68; // R0
                            if (v69 == 0) {
                                // 0x8f60409c
                                g63 = flush_logs(v68, 0, g63, g64, 0x1000, 0, 0, v26);
                                // branch -> 0x8f6040a0
                            }
                            // 0x8f6040a0
                            g69++;
                            if (g66 != 0) {
                                int32_t v71 = is_sufficient_pwr_avail(3200, v69, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5); // 0x8f6040b0
                                v70 = v71;
                                if (v71 != 0) {
                                    int32_t v72 = led_off(v71, v69, g63, g64); // 0x8f6040bc
                                    g66 = 0;
                                    int32_t v73 = display_turn_on(v70, v72, g63, g64, 0x1000, 0, 0, v26); // 0x8f6040c4
                                    v70 = display_dbr_logo(v73, v72, g63, g64);
                                    // branch -> 0x8f6040cc
                                }
                            }
                            // 0x8f6040cc
                            g60 = (int32_t)&g32;
                            char v74 = *(char *)&g32; // 0x8f6040d0
                            int32_t v75 = v74; // 0x8f6040d0
                            g64 = v75;
                            if (v74 == 0) {
                                int32_t v76 = is_sufficient_pwr_avail(v70 & -0x10000 | 2500, (int32_t)&g32, g63, v75, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5); // 0x8f6040e0
                                if (v76 != 0) {
                                    // 0x8f6040ec
                                    init_temp_monitoring(v76, g60, g63, g64, 0x1000);
                                    // branch -> 0x8f6040f0
                                }
                            }
                            int32_t v77 = is_charger_smb1359(thread_sleep(1000, g60, g63, g64, 0x1000, 0, 0, v26), g60, g63, g64, 0x1000, 0, 0, v26); // 0x8f6040f8
                            g62 = v77;
                            int32_t v78 = g60; // 0x8f604104
                            int32_t v79 = g63; // 0x8f604104
                            int32_t v80 = g64; // 0x8f604104
                            if ((char)v77 == 0) {
                                // 0x8f604104
                                if (is_charger_fan54046(v77, v78, v79, v80) != 0) {
                                    // break -> 0x8f604110
                                    break;
                                }
                                // continue -> 0x8f604078
                                continue;
                            } else {
                                int32_t v81 = power_source_detected(v77, v78, v79, v80); // 0x8f604128
                                g60 = v81;
                                int32_t v82 = v81; // 0x8f60413c
                                int32_t v83 = v81; // 0x8f60413c
                                if (v81 == 0) {
                                    // 0x8f604134
                                    v82 = event_signal((int32_t)&g30, 0, g63, g64, 0x1000, 0, 0, v26);
                                    v83 = g60;
                                    // branch -> 0x8f60413c
                                }
                                // 0x8f60413c
                                v66 = smb1359_get_power_source(v82, v83, g63);
                                if ((v66 & 2) != 0) {
                                    // break -> 0x8f604148
                                    break;
                                }
                                // continue -> 0x8f604078
                                continue;
                            }
                        }
                        // 0x8f604148
                        v41 = smb1359_get_usbin_power_source_type(v66, g60, g63, g64);
                        int32_t v84 = is_sufficient_pwr_avail(3200, g60, g63, v41, 0x1000, 0, 0, v41, 0, v7, 0, v2, v3, v4, v5); // 0x8f604158
                        g64 = v41;
                        if (v84 == 0) {
                            // 0x8f6041f8
                            if ((v41 & 64) != 0) {
                                // break (via goto) -> 0x8f604200
                                goto lab_0x8f604200;
                            }
                            v26 = v41;
                            // continue (via goto) -> 0x8f604078
                            goto lab_0x8f604078_8;
                        } else {
                            int32_t v85 = v41 & 16; // 0x8f604168
                            g62 = v85;
                            if (v85 == 0) {
                                // 0x8f604198
                                if ((v41 & 128) == 0) {
                                    // 0x8f6041b0
                                    if ((v41 & 64) != 0) {
                                        // break (via goto) -> 0x8f6041b8
                                        goto lab_0x8f6041b8;
                                    }
                                    v26 = v41;
                                    // continue (via goto) -> 0x8f604078
                                    goto lab_0x8f604078_8;
                                } else {
                                    // 0x8f6041a0
                                    g60 = (int32_t)"CDP Detected!\n";
                                    print_log(1, (int32_t)"CDP Detected!\n", g63, v41, 0x1000, 0, 0, v41, 0, v7, 0, v2, v3);
                                    v26 = v41;
                                    // branch -> 0x8f604078
                                    goto lab_0x8f604078;
                                }
                              lab_0x8f604078_3:
                                while (true) {
                                    // 0x8f604078
                                    v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                                    g59 = v40;
                                    if (v40 == 0) {
                                        goto lab_0x8f604088_19;
                                    }
                                    goto lab_0x8f604234_19;
                                }
                              lab_0x8f6041b8:
                                // 0x8f6041b8
                                g60 = (int32_t)"DCP Detected!\n";
                                int32_t v86 = print_log(1, (int32_t)"DCP Detected!\n", g63, v41, 0x1000, 0, 0, v41, 0, v7, 0, v2, v3); // 0x8f6041c0
                                uint32_t v87 = g67 ^ 1; // 0x8f6041c4
                                int32_t v88; // 0x8f6041e8
                                int32_t v89; // 0x8f6041e8
                                if (g65 == 0) {
                                    // after_if_8f6041d0_0.thread
                                    g64 = 0;
                                    v89 = 0;
                                    v88 = v86;
                                    // branch -> 0x8f6041e8
                                } else {
                                    int32_t v90 = v87 % 2; // 0x8f6041d0
                                    g64 = v90;
                                    if (v90 != 0) {
                                        // 0x8f6041dc
                                        g67 = 1;
                                        g65 = g62;
                                        v89 = g64;
                                        v88 = validate_powerup_reason(v86, g60, g63, v90, 0x1000, 0, 0, v41);
                                        // branch -> 0x8f6041e8
                                    } else {
                                        v89 = 0;
                                        v88 = v86;
                                    }
                                }
                                int32_t v91 = is_hv_charger_present(v88, g60, g63, v89); // 0x8f6041e8
                                g59 = v91;
                                if (v91 != 0) {
                                    v25 = v41;
                                    // break (via goto) -> 0x8f604240
                                    goto lab_0x8f604240;
                                }
                                v26 = v41;
                                // continue (via goto) -> 0x8f604078
                                goto lab_0x8f604078_8;
                            } else {
                                // 0x8f604174
                                g60 = (int32_t)"SDP Detected!\n";
                                int32_t v92 = print_log(1, (int32_t)"SDP Detected!\n", g63, v41, 0x1000, 0, 0, v41, 0, v7, 0, v2, v3); // 0x8f60417c
                                int32_t v93 = g65; // 0x8f604180
                                if (v93 == 4 || v93 < 4 ^ (3 - v93 & v93) < 0) {
                                    // 0x8f60418c
                                    smb1359_config_apsd(v92, g60, g63, g64, 0x1000, 0, 0, v41, 0);
                                    g65++;
                                    v26 = v41;
                                    // branch -> 0x8f604078
                                    goto lab_0x8f604078_3;
                                } else {
                                    // after_if_8f604184_0.thread30
                                    g67 = 1;
                                    v26 = v41;
                                    // branch -> 0x8f604078
                                    goto lab_0x8f604078_3;
                                }
                            }
                        }
                    }
                    // 0x8f604040
                    bq24296_ibuslim_set(4, g60, g63, g64, 0x1000, 0, 0);
                    // branch -> 0x8f60405c
                }
                // 0x8f60405c
                g60 = (int32_t)"Charging Enabled!\n";
                print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                g61 = (int32_t)&g18;
                g67 = 0;
                g69 = 0;
                g65 = 0;
                v26 = v49;
                // branch -> 0x8f604078
                while (true) {
                    // 0x8f604078
                    v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                    g59 = v40;
                    if (v40 == 0) {
                        goto lab_0x8f604088_19;
                    }
                    goto lab_0x8f604234_19;
                }
            } else {
                // 0x8f603fd4
                if (is_usb_attached_cdp(v35, v19, v21) == 0) {
                    // 0x8f603fe4
                    if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                        // 0x8f603fe4
                        v55 = g65;
                        // branch -> 0x8f603ff0
                    } else {
                        // if_8f603fec_0_true
                        v55 = 2;
                        // branch -> 0x8f603ff0
                    }
                    // 0x8f603ff0
                    v36 = fan54046_ibuslim_set(v55, g60, g63, g64, 0x1000, 0);
                    v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
                    g64 = &g33;
                    v54 = 3200;
                    if (v14 == 6) {
                        // if_8f60400c_0_true
                        v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
                        // branch -> after_if_8f60400c_0
                    }
                    // after_if_8f60400c_0
                    g63 = v54;
                    g33 = v54;
                    // branch -> 0x8f60405c
                    // 0x8f60405c
                    g60 = (int32_t)"Charging Enabled!\n";
                    print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                    g61 = (int32_t)&g18;
                    g67 = 0;
                    g69 = 0;
                    g65 = 0;
                    v26 = v49;
                    // branch -> 0x8f604078
                    while (true) {
                        // 0x8f604078
                        v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                        g59 = v40;
                        if (v40 == 0) {
                            goto lab_0x8f604088_19;
                        }
                        goto lab_0x8f604234_19;
                    }
                }
                // 0x8f603ff0
                v36 = fan54046_ibuslim_set(2, g60, g63, g64, 0x1000, 0);
                v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
                g64 = &g33;
                v54 = 3200;
                if (v14 == 6) {
                    // if_8f60400c_0_true
                    v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
                    // branch -> after_if_8f60400c_0
                }
                // after_if_8f60400c_0
                g63 = v54;
                g33 = v54;
                // branch -> 0x8f60405c
            }
            // 0x8f60405c
            g60 = (int32_t)"Charging Enabled!\n";
            print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
            g61 = (int32_t)&g18;
            g67 = 0;
            g69 = 0;
            g65 = 0;
            v26 = v49;
            // branch -> 0x8f604078
            while (true) {
                // 0x8f604078
                v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                g59 = v40;
                if (v40 == 0) {
                    goto lab_0x8f604088_19;
                }
                goto lab_0x8f604234_19;
            }
        }
        // 0x8f603fa8
        if (g66 == 0) {
            // 0x8f603fb0
            v52 = display_dbr_logo(v32, g60, g63, g64);
            // branch -> 0x8f603fc8
        } else {
            // 0x8f603fb8
            g64 = &g6;
            v34 = turn_on_display(0, g60, g63, (int32_t)&g6, 0x1000, 0, 0, v49);
            v52 = v34;
            // branch -> 0x8f603fc8
        }
        // 0x8f603fc8
        v35 = is_charger_fan54046(v52, g60, g63, g64);
        v19 = g60;
        v21 = g63;
        if (v35 == 0) {
            // 0x8f604018
            v38 = is_charger_bq24296(0, v19, v21, g64, 0x1000, 0, 0, v49);
            v20 = g60;
            v22 = g63;
            if (v38 == 0) {
                // 0x8f60404c
                v39 = is_charger_smb1359(0, v20, v22, g64, 0x1000, 0, 0, v49);
                if (v39 != 0) {
                    // 0x8f604058
                    smb1359_config_fastchg_current(v39, g60, g63, g64);
                    // branch -> 0x8f60405c
                }
            } else {
                // 0x8f604024
                if (is_usb_attached_cdp(v38, v20, v22) == 0) {
                    // 0x8f604034
                    if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                        // 0x8f604034
                        v56 = g65;
                        // branch -> 0x8f604040
                    } else {
                        // if_8f60403c_0_true
                        v56 = 4;
                        // branch -> 0x8f604040
                    }
                    // 0x8f604040
                    bq24296_ibuslim_set(v56, g60, g63, g64, 0x1000, 0, 0);
                    // branch -> 0x8f60405c
                    // 0x8f60405c
                    g60 = (int32_t)"Charging Enabled!\n";
                    print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                    g61 = (int32_t)&g18;
                    g67 = 0;
                    g69 = 0;
                    g65 = 0;
                    v26 = v49;
                    // branch -> 0x8f604078
                    while (true) {
                        // 0x8f604078
                        v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                        g59 = v40;
                        if (v40 == 0) {
                            goto lab_0x8f604088_19;
                        }
                        goto lab_0x8f604234_19;
                    }
                }
                // 0x8f604040
                bq24296_ibuslim_set(4, g60, g63, g64, 0x1000, 0, 0);
                // branch -> 0x8f60405c
            }
            // 0x8f60405c
            g60 = (int32_t)"Charging Enabled!\n";
            print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
            g61 = (int32_t)&g18;
            g67 = 0;
            g69 = 0;
            g65 = 0;
            v26 = v49;
            // branch -> 0x8f604078
            while (true) {
                // 0x8f604078
                v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                g59 = v40;
                if (v40 == 0) {
                    goto lab_0x8f604088_19;
                }
                goto lab_0x8f604234_19;
            }
        } else {
            // 0x8f603fd4
            if (is_usb_attached_cdp(v35, v19, v21) == 0) {
                // 0x8f603fe4
                if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                    // 0x8f603fe4
                    v55 = g65;
                    // branch -> 0x8f603ff0
                } else {
                    // if_8f603fec_0_true
                    v55 = 2;
                    // branch -> 0x8f603ff0
                }
                // 0x8f603ff0
                v36 = fan54046_ibuslim_set(v55, g60, g63, g64, 0x1000, 0);
                v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
                g64 = &g33;
                v54 = 3200;
                if (v14 == 6) {
                    // if_8f60400c_0_true
                    v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
                    // branch -> after_if_8f60400c_0
                }
                // after_if_8f60400c_0
                g63 = v54;
                g33 = v54;
                // branch -> 0x8f60405c
                // 0x8f60405c
                g60 = (int32_t)"Charging Enabled!\n";
                print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                g61 = (int32_t)&g18;
                g67 = 0;
                g69 = 0;
                g65 = 0;
                v26 = v49;
                // branch -> 0x8f604078
                while (true) {
                    // 0x8f604078
                    v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                    g59 = v40;
                    if (v40 == 0) {
                        goto lab_0x8f604088_19;
                    }
                    goto lab_0x8f604234_19;
                }
            }
            // 0x8f603ff0
            v36 = fan54046_ibuslim_set(2, g60, g63, g64, 0x1000, 0);
            v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
            g64 = &g33;
            v54 = 3200;
            if (v14 == 6) {
                // if_8f60400c_0_true
                v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
                // branch -> after_if_8f60400c_0
            }
            // after_if_8f60400c_0
            g63 = v54;
            g33 = v54;
            // branch -> 0x8f60405c
        }
        // 0x8f60405c
        g60 = (int32_t)"Charging Enabled!\n";
        print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
        g61 = (int32_t)&g18;
        g67 = 0;
        g69 = 0;
        g65 = 0;
        v26 = v49;
        // branch -> 0x8f604078
        while (true) {
            // 0x8f604078
            v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
            g59 = v40;
            if (v40 == 0) {
                goto lab_0x8f604088_19;
            }
            goto lab_0x8f604234_19;
        }
    } else {
        int32_t v94 = fan540xx_get_ic_info_pn(v13); // 0x8f603e8c
        v14 = v94;
        g65 = v94 == 6;
        v8 = (int32_t)&g18;
        int32_t v95 = (int32_t)*(char *)&g18; // 0x8f603ea8
        v1 = v95;
        v27 = fan54046_chg_enable(1, v95, a3, (int32_t)&g18, v50, 0, 0, v49);
        // branch -> 0x8f603ef0
    }
    // 0x8f603ef0
    v48 = disable_cont_splash_screen(v27, v1, a3);
    v28 = is_sufficient_pwr_avail(3200, v1, v48, v8, v50, 0, 0, v49, 0, v7, 0, v2, v3, v4, v5);
    if (v28 == 0) {
        // 0x8f603f08
        g66 = 1;
        led_on(2, v1, v48, v8);
        v15 = 2;
        // branch -> 0x8f603f14
    } else {
        // if_8f603f00_0_true
        g66 = 0;
        v15 = v28;
        // branch -> 0x8f603f14
    }
    // 0x8f603f14
    v29 = get_accessory_type(v15, v1);
    v58 = v8 & -0x10000 | 3560;
    g70 = g70 & -0x10000 | 3500;
    if (v29 != 1) {
        // if_8f603f30_0_true
        g70 = v58;
        // branch -> after_if_8f603f30_0
    }
    // after_if_8f603f30_0
    event_init((int32_t)&g30, 0, 1, v58);
    g63 = 0;
    g60 = &g3;
    g64 = 24;
    v30 = thread_create((int32_t)"shutdown handler", (int32_t)&g3, 0, 24, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3, v4, v5, v6);
    if (v30 == 0) {
        // 0x8f603f5c
        g60 = (int32_t)"%s: shutdown handler thread_create fail!\n";
        g63 = (int32_t)"do_dead_battery_recovery";
        v31 = print_log(1, (int32_t)"%s: shutdown handler thread_create fail!\n", (int32_t)"do_dead_battery_recovery", g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
        v51 = v31;
        // branch -> 0x8f603f74
    } else {
        // 0x8f603f70
        v51 = thread_resume(v30, g60, g63, g64, 0x1000, 0, 0, v49);
        // branch -> 0x8f603f74
    }
    // 0x8f603f74
    v32 = is_charger_smb1359(v51, g60, g63, g64, 0x1000, 0, 0, v49);
    if (v32 == 0) {
        // 0x8f603f80
        if (power_source_detected(0, g60, g63, g64) == 0) {
            // 0x8f603f98
            g60 = (int32_t)"Power Source missing, Shutdown device!\n";
            v33 = print_log(1, (int32_t)"Power Source missing, Shutdown device!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
            v16 = charger_gone_call_back(v33, g60, g63, g64);
            // branch -> 0x8f603fa8
        } else {
            // 0x8f603f8c
            v16 = enable_usbin_valid_irq((int32_t)&g2, g60);
            // branch -> 0x8f603fa8
        }
        // 0x8f603fa8
        if (g66 == 0) {
            // 0x8f603fb0
            v52 = display_dbr_logo(v16, g60, g63, g64);
            // branch -> 0x8f603fc8
        } else {
            // 0x8f603fb8
            g64 = &g6;
            v34 = turn_on_display(0, g60, g63, (int32_t)&g6, 0x1000, 0, 0, v49);
            v52 = v34;
            // branch -> 0x8f603fc8
        }
        // 0x8f603fc8
        v35 = is_charger_fan54046(v52, g60, g63, g64);
        v19 = g60;
        v21 = g63;
        if (v35 == 0) {
            // 0x8f604018
            v38 = is_charger_bq24296(0, v19, v21, g64, 0x1000, 0, 0, v49);
            v20 = g60;
            v22 = g63;
            if (v38 == 0) {
                // 0x8f60404c
                v39 = is_charger_smb1359(0, v20, v22, g64, 0x1000, 0, 0, v49);
                if (v39 != 0) {
                    // 0x8f604058
                    smb1359_config_fastchg_current(v39, g60, g63, g64);
                    // branch -> 0x8f60405c
                }
            } else {
                // 0x8f604024
                if (is_usb_attached_cdp(v38, v20, v22) == 0) {
                    // 0x8f604034
                    if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                        // 0x8f604034
                        v56 = g65;
                        // branch -> 0x8f604040
                    } else {
                        // if_8f60403c_0_true
                        v56 = 4;
                        // branch -> 0x8f604040
                    }
                    // 0x8f604040
                    bq24296_ibuslim_set(v56, g60, g63, g64, 0x1000, 0, 0);
                    // branch -> 0x8f60405c
                    // 0x8f60405c
                    g60 = (int32_t)"Charging Enabled!\n";
                    print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                    g61 = (int32_t)&g18;
                    g67 = 0;
                    g69 = 0;
                    g65 = 0;
                    v26 = v49;
                    // branch -> 0x8f604078
                    while (true) {
                        // 0x8f604078
                        v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                        g59 = v40;
                        if (v40 == 0) {
                            goto lab_0x8f604088_19;
                        }
                        goto lab_0x8f604234_19;
                    }
                }
                // 0x8f604040
                bq24296_ibuslim_set(4, g60, g63, g64, 0x1000, 0, 0);
                // branch -> 0x8f60405c
            }
            // 0x8f60405c
            g60 = (int32_t)"Charging Enabled!\n";
            print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
            g61 = (int32_t)&g18;
            g67 = 0;
            g69 = 0;
            g65 = 0;
            v26 = v49;
            // branch -> 0x8f604078
            while (true) {
                // 0x8f604078
                v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                g59 = v40;
                if (v40 == 0) {
                    goto lab_0x8f604088_19;
                }
                goto lab_0x8f604234_19;
            }
        } else {
            // 0x8f603fd4
            if (is_usb_attached_cdp(v35, v19, v21) == 0) {
                // 0x8f603fe4
                if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                    // 0x8f603fe4
                    v55 = g65;
                    // branch -> 0x8f603ff0
                } else {
                    // if_8f603fec_0_true
                    v55 = 2;
                    // branch -> 0x8f603ff0
                }
                // 0x8f603ff0
                v36 = fan54046_ibuslim_set(v55, g60, g63, g64, 0x1000, 0);
                v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
                g64 = &g33;
                v54 = 3200;
                if (v14 == 6) {
                    // if_8f60400c_0_true
                    v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
                    // branch -> after_if_8f60400c_0
                }
                // after_if_8f60400c_0
                g63 = v54;
                g33 = v54;
                // branch -> 0x8f60405c
                // 0x8f60405c
                g60 = (int32_t)"Charging Enabled!\n";
                print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                g61 = (int32_t)&g18;
                g67 = 0;
                g69 = 0;
                g65 = 0;
                v26 = v49;
                // branch -> 0x8f604078
                while (true) {
                    // 0x8f604078
                    v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                    g59 = v40;
                    if (v40 == 0) {
                        goto lab_0x8f604088_19;
                    }
                    goto lab_0x8f604234_19;
                }
            }
            // 0x8f603ff0
            v36 = fan54046_ibuslim_set(2, g60, g63, g64, 0x1000, 0);
            v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
            g64 = &g33;
            v54 = 3200;
            if (v14 == 6) {
                // if_8f60400c_0_true
                v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
                // branch -> after_if_8f60400c_0
            }
            // after_if_8f60400c_0
            g63 = v54;
            g33 = v54;
            // branch -> 0x8f60405c
        }
        // 0x8f60405c
        g60 = (int32_t)"Charging Enabled!\n";
        print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
        g61 = (int32_t)&g18;
        g67 = 0;
        g69 = 0;
        g65 = 0;
        v26 = v49;
        // branch -> 0x8f604078
        while (true) {
            // 0x8f604078
            v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
            g59 = v40;
            if (v40 == 0) {
                goto lab_0x8f604088_19;
            }
            goto lab_0x8f604234_19;
        }
    }
    // 0x8f603fa8
    if (g66 == 0) {
        // 0x8f603fb0
        v52 = display_dbr_logo(v32, g60, g63, g64);
        // branch -> 0x8f603fc8
    } else {
        // 0x8f603fb8
        g64 = &g6;
        v34 = turn_on_display(0, g60, g63, (int32_t)&g6, 0x1000, 0, 0, v49);
        v52 = v34;
        // branch -> 0x8f603fc8
    }
    // 0x8f603fc8
    v35 = is_charger_fan54046(v52, g60, g63, g64);
    v19 = g60;
    v21 = g63;
    if (v35 == 0) {
        // 0x8f604018
        v38 = is_charger_bq24296(0, v19, v21, g64, 0x1000, 0, 0, v49);
        v20 = g60;
        v22 = g63;
        if (v38 == 0) {
            // 0x8f60404c
            v39 = is_charger_smb1359(0, v20, v22, g64, 0x1000, 0, 0, v49);
            if (v39 != 0) {
                // 0x8f604058
                smb1359_config_fastchg_current(v39, g60, g63, g64);
                // branch -> 0x8f60405c
            }
        } else {
            // 0x8f604024
            if (is_usb_attached_cdp(v38, v20, v22) == 0) {
                // 0x8f604034
                if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                    // 0x8f604034
                    v56 = g65;
                    // branch -> 0x8f604040
                } else {
                    // if_8f60403c_0_true
                    v56 = 4;
                    // branch -> 0x8f604040
                }
                // 0x8f604040
                bq24296_ibuslim_set(v56, g60, g63, g64, 0x1000, 0, 0);
                // branch -> 0x8f60405c
                // 0x8f60405c
                g60 = (int32_t)"Charging Enabled!\n";
                print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
                g61 = (int32_t)&g18;
                g67 = 0;
                g69 = 0;
                g65 = 0;
                v26 = v49;
                // branch -> 0x8f604078
                while (true) {
                    // 0x8f604078
                    v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                    g59 = v40;
                    if (v40 == 0) {
                        goto lab_0x8f604088_19;
                    }
                    goto lab_0x8f604234_19;
                }
            }
            // 0x8f604040
            bq24296_ibuslim_set(4, g60, g63, g64, 0x1000, 0, 0);
            // branch -> 0x8f60405c
        }
        // 0x8f60405c
        g60 = (int32_t)"Charging Enabled!\n";
        print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
        g61 = (int32_t)&g18;
        g67 = 0;
        g69 = 0;
        g65 = 0;
        v26 = v49;
        // branch -> 0x8f604078
        while (true) {
            // 0x8f604078
            v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
            g59 = v40;
            if (v40 == 0) {
                goto lab_0x8f604088_19;
            }
            goto lab_0x8f604234_19;
        }
    } else {
        // 0x8f603fd4
        if (is_usb_attached_cdp(v35, v19, v21) == 0) {
            // 0x8f603fe4
            if (is_emu_charger_present(0, g60, g63, g64) == 0) {
                // 0x8f603fe4
                v55 = g65;
                // branch -> 0x8f603ff0
            } else {
                // if_8f603fec_0_true
                v55 = 2;
                // branch -> 0x8f603ff0
            }
            // 0x8f603ff0
            v36 = fan54046_ibuslim_set(v55, g60, g63, g64, 0x1000, 0);
            v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
            g64 = &g33;
            v54 = 3200;
            if (v14 == 6) {
                // if_8f60400c_0_true
                v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
                // branch -> after_if_8f60400c_0
            }
            // after_if_8f60400c_0
            g63 = v54;
            g33 = v54;
            // branch -> 0x8f60405c
            // 0x8f60405c
            g60 = (int32_t)"Charging Enabled!\n";
            print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
            g61 = (int32_t)&g18;
            g67 = 0;
            g69 = 0;
            g65 = 0;
            v26 = v49;
            // branch -> 0x8f604078
            while (true) {
                // 0x8f604078
                v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
                g59 = v40;
                if (v40 == 0) {
                    goto lab_0x8f604088_19;
                }
                goto lab_0x8f604234_19;
            }
        }
        // 0x8f603ff0
        v36 = fan54046_ibuslim_set(2, g60, g63, g64, 0x1000, 0);
        v37 = fan54046_get_ibuslim(v36, g60, g63, g64, 0x1000, 0);
        g64 = &g33;
        v54 = 3200;
        if (v14 == 6) {
            // if_8f60400c_0_true
            v54 = *(int32_t *)(4 * v37 + (int32_t)"H\r");
            // branch -> after_if_8f60400c_0
        }
        // after_if_8f60400c_0
        g63 = v54;
        g33 = v54;
        // branch -> 0x8f60405c
    }
    // 0x8f60405c
    g60 = (int32_t)"Charging Enabled!\n";
    print_log(1, (int32_t)"Charging Enabled!\n", g63, g64, 0x1000, 0, 0, v49, 0, v7, 0, v2, v3);
    g61 = (int32_t)&g18;
    g67 = 0;
    g69 = 0;
    g65 = 0;
    v26 = v49;
    // branch -> 0x8f604078
  lab_0x8f604078_8:
    while (true) {
        // 0x8f604078
        v40 = is_sufficient_pwr_avail(g70, g60, g63, g64, 0x1000, 0, 0, v26, 0, v7, 0, v2, v3, v4, v5);
        g59 = v40;
        if (v40 == 0) {
            goto lab_0x8f604088_19;
        }
        goto lab_0x8f604234_19;
    }
  lab_0x8f604200:
    // 0x8f604200
    if (is_hv_charger_present(0, g60, g63, v41) != 0) {
        // break (via goto) -> 0x8f60420c
        goto lab_0x8f60420c;
    }
    v26 = v41;
    // continue (via goto) -> 0x8f604078
    goto lab_0x8f604078_8;
  lab_0x8f60420c:;
    int32_t v96 = is_sufficient_pwr_avail(3200, g60, g63, g64, 0x1000, 0, 0, v41, 0, v7, 0, v2, v3, v4, v5); // 0x8f604210
    if (v96 != 0) {
        // break (via goto) -> 0x8f60421c
        goto lab_0x8f60421c;
    }
    v26 = v41;
    // continue (via goto) -> 0x8f604078
    goto lab_0x8f604078_8;
  lab_0x8f60421c:;
    int32_t v97 = validate_powerup_reason(v96, g60, g63, g64, 0x1000, 0, 0, v41); // 0x8f60421c
    g59 = v97;
    v25 = v41;
    if (g66 != 0) {
        int32_t v98 = led_off(v97, g60, g63, g64); // 0x8f604228
        g60 = v98;
        g59 = display_dbr_logo(g59, v98, g63, g64);
        v25 = v41;
        // branch -> 0x8f604240
    }
  lab_0x8f604240:
    // 0x8f604240
    g58 = -0x709fbdbc;
    ((int32_t (*)())g68)();
    v57 = g59;
    g63 = v57;
    v42 = print_log(1, (int32_t)"Cap has moved by %d percent\n", v57, g64, 0x1000, 0, 0, v25, 0, v7, 0, v2, v3);
    v43 = is_charger_smb1359(v42, (int32_t)"Cap has moved by %d percent\n", g63, g64, 0x1000, 0, 0, v25);
    v23 = g63;
    v24 = g64;
    if (v43 == 0) {
        // 0x8f604260
        v44 = disable_charger_gone_irq(0, (int32_t)"Cap has moved by %d percent\n", v23, v24);
        v53 = disable_usbin_valid_irq(v44);
        // branch -> 0x8f604290
    } else {
        // 0x8f60426c
        v45 = is_hv_charger_present(v43, (int32_t)"Cap has moved by %d percent\n", v23, v24);
        v17 = 0;
        if (v45 != 0) {
            // 0x8f604278
            if (get_accessory_type(v45, (int32_t)"Cap has moved by %d percent\n") != 9) {
                // 0x8f604284
                g63 = set_accessory_type(9, (int32_t)"Cap has moved by %d percent\n");
                v17 = 9;
                // branch -> 0x8f60428c
            } else {
                v17 = 9;
            }
        }
        // 0x8f60428c
        v53 = smb135x_disable_usbin_valid_irq(v17, (int32_t)"Cap has moved by %d percent\n");
        // branch -> 0x8f604290
    }
    // 0x8f604290
    v46 = stop(v53, (int32_t)"Cap has moved by %d percent\n", g63, (int32_t)&g7, 0x1000, 0);
    v59 = *(char *)&g32;
    v60 = v59;
    v18 = v46;
    if (v59 != 0) {
        // 0x8f6042ac
        v47 = timer_cancel((int32_t)&g31, (int32_t)"Cap has moved by %d percent\n", g63, v60, 0x1000, 0, 0, v25);
        v18 = v47;
        // branch -> 0x8f6042b4
    }
    // 0x8f6042b4
    result2 = is_display_on(v18);
    g59 = result2;
    if (result2 == 0) {
        // 0x8f6042c0
        result = display_turn_on(0, (int32_t)"Cap has moved by %d percent\n", g63, v60, 0x1000, 0, 0, v25);
        g59 = result;
        return result;
    }
    // 0x8f6042c4
    if (v7 == g57) {
        // 0x8f6042dc
        enable_cont_splash_screen(result2, (int32_t)&g57);
        return result2;
    }
    // 0x8f6042d8
    __stack_chk_fail();
    return result2;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// void free(void * ptr);
// struct tm * gmtime_r(const time_t * restrict timer, struct tm * restrict tp);
// void * malloc(size_t size);
// void * memcpy(void * restrict dest, const void * restrict src, size_t n);
// void * memset(void * s, int c, size_t n);
// int snprintf(char * restrict s, size_t maxlen, const char * restrict format, ...);
// int strcmp(const char * s1, const char * s2);
// size_t strlen(const char * s);
// int strncmp(const char * s1, const char * s2, size_t n);
// char * strncpy(char * restrict dest, const char * restrict src, size_t n);
// size_t strnlen(const char * string, size_t maxlen);
// char * strrchr(char * s, int c);
// int vsprintf(char * restrict s, const char * restrict format, _G_va_list arg);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 30
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 19:51:25
