//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>

// ------------------- Function Prototypes --------------------

int32_t mdss_smp_alloc(int32_t a1, int32_t a2, int32_t a3, int32_t result2);
int32_t mdss_source_pipe_config(int32_t * a1, int32_t * a2, int32_t * a3);

// ------------------------ Functions -------------------------

// Address range: 0x8f60e058 - 0x8f60e12f
int32_t mdss_smp_alloc(int32_t a1, int32_t a2, int32_t a3, int32_t result2) {
    int32_t v1 = result2; // R4
    if (a3 < a2) {
        // 0x8f60e0e0
        // branch -> 0x8f60e108
    } else {
        int32_t v2 = a2; // 0x8f60e08813
        int32_t v3 = a3; // 0x8f60e08411
        int32_t v4 = 0; // 0x8f60e0a4
        int32_t v5 = 0; // 0x8f60e0846
        while (true) {
            int32_t v6 = v5 + 1; // 0x8f60e094
            int32_t v7 = v6; // R6
            int32_t v8 = a1 << 8 * (v5 % 3) | v4; // 0x8f60e0a4
            int32_t v9 = v8; // R5
            int32_t v10 = v6 % 3;
            int32_t v11 = v10; // R1
            int32_t v12 = v2; // 0x8f60e088
            int32_t v13 = v3; // 0x8f60e084
            int32_t v14 = v8; // 0x8f60e0a48
            if (v10 == 0) {
                // 0x8f60e0b8
                *(int32_t *)(v1 + 0x1a01080) = v8;
                int32_t v15 = v1; // 0x8f60e0c8
                v1 = v15 + 4;
                *(int32_t *)(v15 + 0x1a01130) = v9;
                v9 = v11;
                v12 = a2;
                v13 = a3;
                v6 = v7;
                v14 = v11;
                // branch -> 0x8f60e0d8
            }
            // 0x8f60e0d8
            if (v6 + v13 < v12) {
                int32_t result = v1; // 0x8f60e10c
                if (v6 % 3 != 0) {
                    // 0x8f60e0f0
                    *(int32_t *)(v1 + 0x1a01080) = v14;
                    *(int32_t *)(v1 + 0x1a01130) = v9;
                    result = v1 + 4;
                    // branch -> 0x8f60e108
                }
                // 0x8f60e120
                return result;
            }
            // 0x8f60e0d8
            v2 = v12;
            v3 = v13;
            v4 = v14;
            v5 = v6;
            // branch -> 0x8f60e090
        }
    }
    // 0x8f60e120
    return result2;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 2
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 06:44:38
