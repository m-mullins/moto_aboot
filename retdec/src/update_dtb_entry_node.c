//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

char * platform_dt_absolute_compat_match(char * a1, int32_t a2);
int32_t update_dtb_entry_node(char * a1, int32_t a2);

// --------------------- Global Variables ---------------------

int32_t g2 = 0; // R4
int32_t g3 = 0; // R7
int32_t g1 = 0; // 0x8f7112f4

// ------------------------ Functions -------------------------

// Address range: 0x8f6131d8 - 0x8f6134c7
int32_t update_dtb_entry_node(char * a1, int32_t a2) {
    int32_t v1 = 0; // R2
    int32_t v2 = (int32_t)a1; // 0x8f6131d8_0
    int32_t v3 = a2; // R1
    int32_t v4 = g2; // 0x8f6131d8
    int32_t v5 = g3; // 0x8f6131d8
    int32_t v6 = *(int32_t *)(v2 + 4); // 0x8f6131e8
    g2 = v6;
    g3 = v2;
    int32_t v7 = a2; // R8
    int32_t v8 = 0; // R6
    int32_t v9 = g1; // R3
    int32_t v10; // 0x8f61342826102
    int32_t v11; // 0x8f61342831101
    int32_t v12; // 0x8f61342836100
    int32_t v13; // 0x8f6134284299
    int32_t v14; // 0x8f6134286106
    int32_t v15; // 0x8f61342811105
    int32_t v16; // 0x8f61342816104
    int32_t v17; // 0x8f61342821103
    int32_t v18;
    int32_t v19;
    int32_t v20;
    int32_t v21;
    int32_t v22;
    int32_t v23;
    int32_t v24;
    int32_t v25;
    int32_t v26; // 0x8f613378
    int32_t v27; // 0x8f613374
    int32_t v28; // 0x8f6133a8
    int32_t v29; // 0x8f613410174
    int32_t v30; // 0x8f613374
    if (v6 != v2) {
        while (true) {
            // 0x8f613208
            int32_t v31; // 0x8f61342828
            int32_t v32; // 0x8f61342833
            int32_t v33; // 0x8f61342838
            int32_t v34; // 0x8f61342844
            int32_t v35; // 0x8f6134288
            int32_t v36; // 0x8f61342813
            int32_t v37; // 0x8f61342818
            int32_t v38; // 0x8f61342823
            if (v6 == 0) {
                // 0x8f613210
                print_log(2, (int32_t)"Current node is the end\n", v1, v9, v25, v24, v23, v22, v21, v20, v19, v18, 0);
                // branch -> 0x8f613374
                // 0x8f613374
                v27 = g3;
                v30 = *(int32_t *)(v27 + 4);
                g2 = v30;
                if (v30 != v27) {
                    v29 = v27;
                    v28 = v30;
                    v14 = v24;
                    v15 = v23;
                    v16 = v22;
                    v17 = v21;
                    v10 = v20;
                    v11 = v19;
                    v12 = v18;
                    v13 = v25;
                    while (true) {
                        // 0x8f613418
                        if (v28 == 0) {
                            // 0x8f613420
                            print_log(2, (int32_t)"Current node is the end\n", v1, v9, v13, v14, v15, v16, v17, v10, v11, v12, 0);
                            // branch -> 0x8f61349c
                            // 0x8f6134b0
                            g2 = v4;
                            g3 = v5;
                            return 1;
                        }
                      lab_0x8f613430_3:
                        // 0x8f613430
                        v34 = v13;
                        v33 = v12;
                        v32 = v11;
                        v31 = v10;
                        v38 = v17;
                        v37 = v16;
                        v36 = v15;
                        v35 = v14;
                        switch (v26 - 1) {
                            case 0: {
                                int32_t v39 = *(int32_t *)(*(int32_t *)(v28 + 8) + 12);
                                // branch -> 0x8f6133a0
                                // 0x8f6133a0
                                v9 = v39;
                                int32_t v40 = v29; // 0x8f613410
                                int32_t v41 = v28; // 0x8f61340c
                                int32_t v42 = v13; // 0x8f61342841
                                int32_t v43 = v12; // 0x8f61342835
                                int32_t v44 = v11; // 0x8f61342830
                                int32_t v45 = v10; // 0x8f61342825
                                int32_t v46 = v17; // 0x8f61342820
                                int32_t v47 = v16; // 0x8f61342815
                                int32_t v48 = v15; // 0x8f61342810
                                int32_t v49 = v14; // 0x8f6134285
                                if (v39 != v8) {
                                    int32_t v50 = *(int32_t *)(v28 + 8); // 0x8f6133a8
                                    int32_t v51 = *(int32_t *)(v50 + 8); // 0x8f6133b4
                                    int32_t v52 = *(int32_t *)(v50 + 12); // 0x8f6133bc
                                    int32_t v53 = *(int32_t *)(v50 + 16); // 0x8f6133c4
                                    int32_t v54 = *(int32_t *)(v50 + 20); // 0x8f6133cc
                                    int32_t v55 = *(int32_t *)(v50 + 24); // 0x8f6133d4
                                    int32_t v56 = *(int32_t *)(v50 + 28); // 0x8f6133dc
                                    int32_t v57 = *(int32_t *)(v50 + 32); // 0x8f6133e4
                                    int32_t v58 = *(int32_t *)(v50 + 36); // 0x8f6133ec
                                    int32_t v59 = *(int32_t *)v50; // 0x8f6133f4
                                    v1 = v59;
                                    int32_t v60 = *(int32_t *)(v50 + 4); // 0x8f6133f4
                                    v9 = v60;
                                    print_log(2, (int32_t)"Delete don't fit DTB entry %u/%08x/0x%08x/%x/%x/%x/%x/%x/%x/%x\n", v59, v60, v51, v52, v53, v54, v55, v56, v57, v58, 0);
                                    int32_t v61 = g2; // 0x8f6133fc
                                    int32_t v62 = *(int32_t *)v61; // 0x8f613400
                                    dt_entry_list_delete(v61, (int32_t)"Delete don't fit DTB entry %u/%08x/0x%08x/%x/%x/%x/%x/%x/%x/%x\n", v1, v9, v51, v52, v53);
                                    g2 = v62;
                                    v40 = g3;
                                    v41 = v62;
                                    v42 = v51;
                                    v43 = v58;
                                    v44 = v57;
                                    v45 = v56;
                                    v46 = v55;
                                    v47 = v54;
                                    v48 = v53;
                                    v49 = v52;
                                    // branch -> 0x8f61340c
                                }
                                int32_t v63 = *(int32_t *)(v41 + 4); // 0x8f61340c
                                g2 = v63;
                                if (v63 == v40) {
                                    // break (via goto) -> 0x8f61349c
                                    goto lab_0x8f61349c;
                                }
                                v29 = v40;
                                v28 = v63;
                                v14 = v49;
                                v15 = v48;
                                v16 = v47;
                                v17 = v46;
                                v10 = v45;
                                v11 = v44;
                                v12 = v43;
                                v13 = v42;
                                // continue -> 0x8f613418
                                continue;
                            }
                            case 1: {
                                // 0x8f613454
                                // branch -> 0x8f61348c
                                break;
                            }
                            case 2: {
                                // 0x8f613460
                                // branch -> 0x8f61348c
                                break;
                            }
                            case 3: {
                                // 0x8f61346c
                                // branch -> 0x8f61348c
                                break;
                            }
                            case 4: {
                                // 0x8f613478
                                // branch -> 0x8f61348c
                                break;
                            }
                            case 5: {
                                // 0x8f613484
                                // branch -> 0x8f61348c
                                break;
                            }
                        }
                        // 0x8f613380
                        print_log(-1, (int32_t)"ERROR: Unsupported version (%d) in dt node check \n", v7, v9, v34, v35, v36, v37, v38, v31, v32, v33, 0);
                        // branch -> 0x8f61349c
                        // 0x8f6134b0
                        g2 = v4;
                        g3 = v5;
                        return 0;
                    }
                }
                // 0x8f6134b0
                g2 = v4;
                g3 = v5;
                return 1;
            }
            // 0x8f613220
            v34 = v25;
            v33 = v18;
            v32 = v19;
            v31 = v20;
            v38 = v21;
            v37 = v22;
            v36 = v23;
            v35 = v24;
            int32_t v64; // R5
            int32_t v65; // 0x8f6132e8
            switch (a2 - 1) {
                case 0: {
                    int32_t v66 = *(int32_t *)(v6 + 8); // 0x8f613244
                    v9 = v66;
                    v64 = *(int32_t *)(v66 + 12);
                    v65 = board_soc_version(v2, v3, v1, v66);
                    // branch -> 0x8f6132d4
                  lab_0x8f6132d4:;
                    uint32_t v67 = v64; // 0x8f6132d4
                    if (v67 == v65) {
                        // 0x8f613370
                        v8 = v65;
                        // branch -> 0x8f613374
                    } else {
                        uint32_t v68 = v8; // 0x8f6132dc
                        v9 = v67 > v68;
                        int32_t v69; // 0x8f61342824
                        int32_t v70; // 0x8f61342829
                        int32_t v71; // 0x8f61342834
                        int32_t v72; // 0x8f613264171
                        int32_t v73; // 0x8f61342840
                        int32_t v74; // 0x8f6134284
                        int32_t v75; // 0x8f6134289
                        int32_t v76; // 0x8f61342814
                        int32_t v77; // 0x8f61342819
                        if (v67 < v65) {
                            // after_if_8f6132ec_0.thread
                            v9 = 0;
                            // branch -> 0x8f6132fc
                        } else {
                            // after_if_8f6132ec_0
                            if (v67 > v68) {
                                // if_8f6132f4_0_true
                                v8 = v67;
                                v72 = v65;
                                v73 = v25;
                                v71 = v18;
                                v70 = v19;
                                v69 = v20;
                                v77 = v21;
                                v76 = v22;
                                v75 = v23;
                                v74 = v24;
                                // branch -> 0x8f613368
                              lab_0x8f613368_2:;
                                int32_t v78 = *(int32_t *)(g2 + 4); // 0x8f613368
                                g2 = v78;
                                if (v78 == g3) {
                                    v24 = v74;
                                    v23 = v75;
                                    v22 = v76;
                                    v21 = v77;
                                    v20 = v69;
                                    v19 = v70;
                                    v18 = v71;
                                    v25 = v73;
                                    // break (via goto) -> 0x8f613374
                                    goto lab_0x8f613374;
                                }
                                v2 = v72;
                                v6 = v78;
                                v24 = v74;
                                v23 = v75;
                                v22 = v76;
                                v21 = v77;
                                v20 = v69;
                                v19 = v70;
                                v18 = v71;
                                v25 = v73;
                                // continue -> 0x8f613208
                                continue;
                            }
                        }
                        // 0x8f6132fc
                        if (v67 < v68) {
                            v72 = v65;
                            v73 = v25;
                            v71 = v18;
                            v70 = v19;
                            v69 = v20;
                            v77 = v21;
                            v76 = v22;
                            v75 = v23;
                            v74 = v24;
                            goto lab_0x8f613368_2;
                        }
                        int32_t v79 = *(int32_t *)(g2 + 8); // 0x8f613304
                        v3 = (int32_t)"Delete don't fit DTB entry %u/%08x/0x%08x/%x/%x/%x/%x/%x/%x/%x\n";
                        int32_t v80 = *(int32_t *)(v79 + 8); // 0x8f613310
                        int32_t v81 = *(int32_t *)(v79 + 12); // 0x8f613318
                        int32_t v82 = *(int32_t *)(v79 + 16); // 0x8f613320
                        int32_t v83 = *(int32_t *)(v79 + 20); // 0x8f613328
                        int32_t v84 = *(int32_t *)(v79 + 24); // 0x8f613330
                        int32_t v85 = *(int32_t *)(v79 + 28); // 0x8f613338
                        int32_t v86 = *(int32_t *)(v79 + 32); // 0x8f613340
                        int32_t v87 = *(int32_t *)(v79 + 36); // 0x8f613348
                        int32_t v88 = *(int32_t *)v79; // 0x8f613350
                        v1 = v88;
                        int32_t v89 = *(int32_t *)(v79 + 4); // 0x8f613350
                        v9 = v89;
                        print_log(2, (int32_t)"Delete don't fit DTB entry %u/%08x/0x%08x/%x/%x/%x/%x/%x/%x/%x\n", v88, v89, v80, v81, v82, v83, v84, v85, v86, v87, 0);
                        int32_t v90 = g2; // 0x8f613358
                        g2 = *(int32_t *)v90;
                        v72 = dt_entry_list_delete(v90, v3, v1, v9, v80, v81, v82);
                        v73 = v80;
                        v71 = v87;
                        v70 = v86;
                        v69 = v85;
                        v77 = v84;
                        v76 = v83;
                        v75 = v82;
                        v74 = v81;
                        // branch -> 0x8f613368
                        goto lab_0x8f613368_2;
                    }
                    // 0x8f613374
                    v27 = g3;
                    v30 = *(int32_t *)(v27 + 4);
                    g2 = v30;
                    if (v30 != v27) {
                        v29 = v27;
                        v28 = v30;
                        v14 = v24;
                        v15 = v23;
                        v16 = v22;
                        v17 = v21;
                        v10 = v20;
                        v11 = v19;
                        v12 = v18;
                        v13 = v25;
                        while (true) {
                            // 0x8f613418
                            if (v28 != 0) {
                                goto lab_0x8f613430_3;
                            }
                            // 0x8f613420
                            print_log(2, (int32_t)"Current node is the end\n", v1, v9, v13, v14, v15, v16, v17, v10, v11, v12, 0);
                            // branch -> 0x8f61349c
                        }
                        // 0x8f613374
                        v27 = g3;
                        v30 = *(int32_t *)(v27 + 4);
                        g2 = v30;
                        v26 = v7;
                        v64 = v26 - 1;
                        if (v30 != v27) {
                            v29 = v27;
                            v28 = v30;
                            v14 = v24;
                            v15 = v23;
                            v16 = v22;
                            v17 = v21;
                            v10 = v20;
                            v11 = v19;
                            v12 = v18;
                            v13 = v25;
                            while (true) {
                                // 0x8f613418
                                if (v28 != 0) {
                                    goto lab_0x8f613430_3;
                                }
                                int32_t v91 = v1; // 0x8f613428
                                int32_t v92 = v9; // 0x8f613428
                                print_log(2, (int32_t)"Current node is the end\n", v91, v92, v13, v14, v15, v16, v17, v10, v11, v12, 0);
                                // branch -> 0x8f61349c
                            }
                        }
                    }
                    // 0x8f6134b0
                    g2 = v4;
                    g3 = v5;
                    return 1;
                }
                case 1: {
                    int32_t v93 = *(int32_t *)(v6 + 8); // 0x8f613254
                    v9 = v93;
                    v64 = *(int32_t *)(v93 + 4) & 0xffff00;
                    // branch -> 0x8f6132cc
                    // 0x8f6132cc
                    v65 = board_target_id(v2, v3) & 0xffff00;
                    // branch -> 0x8f6132d4
                    goto lab_0x8f6132d4;
                }
                case 2: {
                    // 0x8f61326c
                    v9 = *(int32_t *)(v6 + 8);
                    // branch -> 0x8f6132c8
                    break;
                }
                case 3: {
                    // 0x8f613284
                    v9 = *(int32_t *)(v6 + 8);
                    // branch -> 0x8f6132c8
                    break;
                }
                case 4: {
                    // 0x8f61329c
                    v9 = *(int32_t *)(v6 + 8);
                    // branch -> 0x8f6132c8
                    break;
                }
                case 5: {
                    // 0x8f6132b4
                    v9 = *(int32_t *)(v6 + 8);
                    // branch -> 0x8f6132c8
                    break;
                }
            }
            // 0x8f613380
            print_log(-1, (int32_t)"ERROR: Unsupported version (%d) in dt node check \n", v7, v9, v34, v35, v36, v37, v38, v31, v32, v33, 0);
            // branch -> 0x8f61349c
            // 0x8f6134b0
            g2 = v4;
            g3 = v5;
            return 0;
        }
    }
  lab_0x8f613374:
    // 0x8f613374
    v27 = g3;
    v30 = *(int32_t *)(v27 + 4);
    g2 = v30;
    v26 = v7;
    if (v30 != v27) {
        v29 = v27;
        v28 = v30;
        v14 = v24;
        v15 = v23;
        v16 = v22;
        v17 = v21;
        v10 = v20;
        v11 = v19;
        v12 = v18;
        v13 = v25;
        while (true) {
            // 0x8f613418
            if (v28 != 0) {
                goto lab_0x8f613430_3;
            }
            // 0x8f613420
            print_log(2, (int32_t)"Current node is the end\n", v1, v9, v13, v14, v15, v16, v17, v10, v11, v12, 0);
            // branch -> 0x8f61349c
        }
    }
  lab_0x8f61349c:
    // 0x8f6134b0
    g2 = v4;
    g3 = v5;
    return 1;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// void * memset(void * s, int c, size_t n);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 2
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 07:13:59
