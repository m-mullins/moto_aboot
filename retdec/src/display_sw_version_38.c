//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdio.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

char * display_mode_text(char * a1, int32_t a2);
char * display_sw_version_38(void);
int32_t fastboot_flush_all_logs_35(int32_t a1, int32_t a2);
int32_t get_line(int32_t a1);
int32_t menu_init(int32_t a1);
int32_t menu_ondraw(void);
int32_t menu_onkey(void);
int32_t menu_start(int32_t a1, int32_t a2);
int32_t onkey_37(char * a1, int32_t a2, int32_t a3, int32_t a4);
int32_t screen_onkey(int32_t a1, int32_t a2);
int32_t screen_start(int32_t a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t screen_stop(int32_t a1, int32_t a2, int32_t a3);
int32_t set_content_to_show_34(int32_t a1, int32_t a2);
int32_t stop_36(int32_t a1, int32_t a2);
int32_t unlock_abort(int32_t a1, int32_t a2, int32_t a3);
int32_t unlock_continue(int32_t a1, int32_t a2);

// --------------------- Global Variables ---------------------

int32_t g55 = 0; // LR
int32_t g56 = 0; // R0
int32_t g57 = 0; // R1
int32_t g58 = 0; // R2
int32_t g59 = 0; // R3
int32_t g60 = 0; // R4
int32_t g61 = 0; // R5
int32_t g62 = 0; // R6
int32_t g63 = 0; // R7
int32_t g64 = 0; // R8
int32_t g1 = -0x16d2bfed; // 0x8f623e84
int32_t (*g2)() = (int32_t (*)())-0x16d2bfc9; // 0x8f638578
int32_t g3 = -0x16d2bc09; // 0x8f638ab0
int32_t g4 = -0x15ffffc9; // 0x8f63ca90
int32_t g5 = -0x16d2bfed; // 0x8f63ccf0
int32_t g6 = 0x40000; // 0x8f69cce4
int32_t g7 = 0x80000; // 0x8f69ccf0
char * g8; // 0x8f6a4e20
int32_t g9 = 0; // 0x8f6ac7f8
int32_t g10 = 0; // 0x8f6ac7fc
int32_t g11 = 0; // 0x8f6ac848
int32_t g12 = 0; // 0x8f6ac84c
int32_t g13 = 0; // 0x8f6ac898
int32_t g14 = 0; // 0x8f6ac89c
int32_t g15 = 0; // 0x8f6ac8f0
int32_t g16 = 0; // 0x8f6ac92c
int32_t g17 = 0; // 0x8f6ac930
int32_t g18 = 0; // 0x8f6ac97c
int32_t g19 = 0; // 0x8f6ac980
int32_t g20 = 0; // 0x8f6ac9cc
int32_t g21 = 0; // 0x8f6ac9d0
int32_t g22 = 3; // 0x8f6aca20
int32_t g23 = 0; // 0x8f6aca24
int32_t g24 = -0x709e1c78; // 0x8f6aca70
int32_t g25 = 2; // 0x8f6aca74
int32_t g26 = 0; // 0x8f6b1698
int32_t g27 = 0; // 0x8f6b16c4
int32_t g28 = 0; // 0x8f6b170c
int32_t g29 = 0; // 0x8f6e09bc
int32_t g30 = 0; // 0x8f6e09c0
int32_t g31 = 0; // 0x8f6e09c4
int32_t g32 = 0; // 0x8f6e09c8
int32_t g33 = 0; // 0x8f6e09e8
int32_t g34 = 0; // 0x8f6e09ec
int32_t g35 = 0; // 0x8f6e09f0
int32_t g36 = 0; // 0x8f6e09f4
int32_t g37 = 0; // 0x8f6e09f8
int32_t g38 = 0; // 0x8f6e09fc
char * g39; // 0x8f6e0a00
int32_t g40 = 0; // 0x8f6e0a04
char * g41; // 0x8f6e0a09
int32_t g42 = 0; // 0x8f6e0a28
int32_t g43 = 0; // 0x8f6e0a44
char * g44; // 0x8f6e0a49
int32_t g45 = 0; // 0x8f6e0a4c
int32_t g46 = 0; // 0x8f7112f4
int32_t g47 = 0; // 0x8f7114b8
int32_t g48 = 0; // 0x8f711514
char * g49; // 0x8f711530
int32_t g50 = 0; // 0x8f712580
int32_t g51 = 0; // 0x8f71259c
int32_t g52 = 0; // 0x8f7125a0
int32_t g53 = 0; // 0x8f7125a4
int32_t g54 = 0; // 0x8f7125ec

// ------------------------ Functions -------------------------

// Address range: 0x8f63d0ac - 0x8f63d32f
char * display_sw_version_38(void) {
    int32_t v1 = g60; // 0x8f63d0ac
    int32_t str;
    int32_t v2 = &str; // 0x8f63d0b8_0
    g60 = v2;
    int32_t str2;
    int32_t v3 = &str2; // 0x8f63d0c4_0
    int32_t v4 = g46;
    memset((char *)&str2, 0, 128);
    memset((char *)&str, 0, 32);
    strncpy((char *)&str, "2016_06_23+18:11:44", 31);
    int32_t len = strlen((char *)&str); // 0x8f63d0fc
    int32_t v5 = 0; // R3
    int32_t chars_printed; // 0x8f63d230
    int32_t v6; // 0x8f63d134
    int32_t v7; // 0x8f63d180
    int32_t v8; // 0x8f63d194
    int32_t v9; // 0x8f63d1d0
    int32_t v10; // 0x8f63d1e4
    int32_t len2; // 0x8f63d20c
    int32_t v11; // 0x8f63d218
    int32_t v12; // 0x8f63d230
    int32_t v13; // 0x8f63d244
    int32_t v14; // 0x8f63d26c
    int32_t v15; // 0x8f63d280
    int32_t v16; // 0x8f63d2bc
    int32_t v17; // 0x8f63d2d0
    int32_t v18; // 0x8f63d2e4
    int32_t v19; // R1
    int32_t v20; // R2
    int32_t v21;
    int32_t v22;
    int32_t v23;
    int32_t v24;
    char * v25;
    int32_t v26;
    int32_t v27; // 0x8f63d1e8
    int32_t v28; // 0x8f63d144
    int32_t v29; // 0x8f63d160
    int32_t v30; // 0x8f63d23c
    int32_t v31; // 0x8f63d258
    if (len == 0) {
        // 0x8f63d134
        v6 = build_sig_is_uniform(len, 32, 31, 0, v24, v23, v22, v21, 0, str2);
        g57 = 127;
        v28 = g60;
        g61 = 0;
        if (v6 == 0) {
            // if_8f63d158_0_true.critedge
            v29 = (int32_t)"(*)";
            // branch -> after_if_8f63d158_0
        } else {
            // if_8f63d150_0_true
            v29 = (int32_t)&g8;
            // branch -> after_if_8f63d158_0
        }
        // after_if_8f63d158_0
        g58 = (int32_t)"BL: %02X.%02X%s (sha-%s, %s)";
        snprintf((char *)&str2, 127, "BL: %02X.%02X%s (sha-%s, %s)", 129, 4, (char *)v29, "3220316", (char *)v28);
        v7 = get_line(1);
        g57 = 1;
        g58 = 1;
        display_clear_rows(v7, 1, 1, 129, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
        v8 = get_line(1);
        display_draw_text_at_line_with_color(v3, v8, 0, 0xffffff, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
        str = 0x1000000 * g61 / 0x1000000;
        getvar_version_baseband((char *)&str, v8, 0, 0xffffff, 4, v29, (int32_t)"3220316");
        g57 = 127;
        g58 = (int32_t)"Baseband: %s";
        snprintf((char *)&str2, 127, "Baseband: %s", &str);
        v9 = get_line(2);
        g57 = 1;
        g58 = 1;
        display_clear_rows(v9, 1, 1, v2, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
        v10 = get_line(2);
        v27 = g61;
        v20 = v27;
        v5 = 0xffffff;
        display_draw_text_at_line_with_color(v3, v10, v27, 0xffffff, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
        v19 = 24;
        get_sku((char *)&str, 24, v20, v5, 4, v29, (int32_t)"3220316");
        len2 = strlen((char *)&str);
        chars_printed = len2;
        if (len2 == g61) {
            // 0x8f63d218
            v11 = target_radio(len2, v19, v20, v5, 4, v29);
            v19 = 24;
            v20 = (int32_t)"radio%d";
            v5 = v11;
            chars_printed = snprintf((char *)&str, 24, "radio%d", v11);
            // branch -> 0x8f63d230
        }
        // 0x8f63d230
        v12 = get_product_name(chars_printed, v19, v20, v5, 4, v29, (int32_t)"3220316");
        v25 = (char *)v12;
        v26 = g54;
        v30 = *(int32_t *)(v26 + 40);
        v13 = get_hw_rel(v25, v19, v20, v26, 4, v29, (int32_t)"3220316");
        g57 = 127;
        g58 = (int32_t)"Product/Variant: %s %s %uGB %s";
        g61 = 0;
        v31 = g60;
        snprintf((char *)&str2, 127, "Product/Variant: %s %s %uGB %s", v25, (char *)v31, v30, (char *)v13);
        v14 = get_line(3);
        g57 = 1;
        g58 = 1;
        display_clear_rows(v14, 1, 1, v12, v31, v30, v13, v28, 0, str2, 0, 0, 0);
        v15 = get_line(3);
        display_draw_text_at_line_with_color(v3, v15, 0, 0xffffff, v31, v30, v13, v28, 0, str2, 0, 0, 0);
        str2 = 0x1000000 * g61 / 0x1000000;
        target_serialno((char *)&str, v15, 0, 0xffffff, v31, v30, v13);
        g57 = 127;
        g58 = (int32_t)"Serial Number: %s\n";
        snprintf((char *)&str2, 127, "Serial Number: %s\n", &str);
        v16 = get_line(4);
        g57 = 1;
        g58 = 1;
        display_clear_rows(v16, 1, 1, v2, v31, v30, v13, v28, 0, str2, 0, 0, 0);
        v17 = get_line(4);
        v18 = display_draw_text_at_line_with_color(v3, v17, g61, 0xffffff, v31, v30, v13, v28, 0, str2, 0, 0, 0);
        if (v4 != g46) {
            // 0x8f63d2f8
            __stack_chk_fail();
            // branch -> 0x8f63d2fc
        }
        // 0x8f63d2fc
        g60 = v1;
        return (char *)v18;
    }
    int32_t v32 = 0; // 0x8f63d11c
    while (true) {
        char * v33 = (char *)(g60 + v32); // 0x8f63d114_0
        char v34 = *v33; // 0x8f63d114
        v20 = v34;
        switch (v34) {
            case 95: {
                // if_8f63d11c_0_true
                *v33 = (char)45;
                // branch -> 0x8f63d12c
                break;
            }
            case 43: {
                // if_8f63d128_0_true
                *v33 = 32;
                // branch -> 0x8f63d12c
                break;
            }
        }
        int32_t v35 = v5 + 1; // 0x8f63d12c
        v5 = v35;
        if (v35 == len) {
            // break (via goto) -> 0x8f63d134
            goto lab_0x8f63d134;
        }
        v32 = v35;
        // continue -> 0x8f63d114
    }
  lab_0x8f63d134:
    // 0x8f63d134
    v6 = build_sig_is_uniform(len, 32, v20, len, v24, v23, v22, v21, 0, str2);
    g57 = 127;
    v28 = g60;
    g61 = 0;
    if (v6 == 0) {
        // if_8f63d158_0_true.critedge
        v29 = (int32_t)"(*)";
        // branch -> after_if_8f63d158_0
    } else {
        // if_8f63d150_0_true
        v29 = (int32_t)&g8;
        // branch -> after_if_8f63d158_0
    }
    // after_if_8f63d158_0
    g58 = (int32_t)"BL: %02X.%02X%s (sha-%s, %s)";
    snprintf((char *)&str2, 127, "BL: %02X.%02X%s (sha-%s, %s)", 129, 4, (char *)v29, "3220316", (char *)v28);
    v7 = get_line(1);
    g57 = 1;
    g58 = 1;
    display_clear_rows(v7, 1, 1, 129, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
    v8 = get_line(1);
    display_draw_text_at_line_with_color(v3, v8, 0, 0xffffff, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
    str = 0x1000000 * g61 / 0x1000000;
    getvar_version_baseband((char *)&str, v8, 0, 0xffffff, 4, v29, (int32_t)"3220316");
    g57 = 127;
    g58 = (int32_t)"Baseband: %s";
    snprintf((char *)&str2, 127, "Baseband: %s", &str);
    v9 = get_line(2);
    g57 = 1;
    g58 = 1;
    display_clear_rows(v9, 1, 1, v2, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
    v10 = get_line(2);
    v27 = g61;
    v20 = v27;
    v5 = 0xffffff;
    display_draw_text_at_line_with_color(v3, v10, v27, 0xffffff, 4, v29, (int32_t)"3220316", v28, 0, str2, 0, 0, 0);
    v19 = 24;
    get_sku((char *)&str, 24, v20, v5, 4, v29, (int32_t)"3220316");
    len2 = strlen((char *)&str);
    chars_printed = len2;
    if (len2 == g61) {
        // 0x8f63d218
        v11 = target_radio(len2, v19, v20, v5, 4, v29);
        v19 = 24;
        v20 = (int32_t)"radio%d";
        v5 = v11;
        chars_printed = snprintf((char *)&str, 24, "radio%d", v11);
        // branch -> 0x8f63d230
    }
    // 0x8f63d230
    v12 = get_product_name(chars_printed, v19, v20, v5, 4, v29, (int32_t)"3220316");
    v25 = (char *)v12;
    v26 = g54;
    v30 = *(int32_t *)(v26 + 40);
    v13 = get_hw_rel(v25, v19, v20, v26, 4, v29, (int32_t)"3220316");
    g57 = 127;
    g58 = (int32_t)"Product/Variant: %s %s %uGB %s";
    g61 = 0;
    v31 = g60;
    snprintf((char *)&str2, 127, "Product/Variant: %s %s %uGB %s", v25, (char *)v31, v30, (char *)v13);
    v14 = get_line(3);
    g57 = 1;
    g58 = 1;
    display_clear_rows(v14, 1, 1, v12, v31, v30, v13, v28, 0, str2, 0, 0, 0);
    v15 = get_line(3);
    display_draw_text_at_line_with_color(v3, v15, 0, 0xffffff, v31, v30, v13, v28, 0, str2, 0, 0, 0);
    str2 = 0x1000000 * g61 / 0x1000000;
    target_serialno((char *)&str, v15, 0, 0xffffff, v31, v30, v13);
    g57 = 127;
    g58 = (int32_t)"Serial Number: %s\n";
    snprintf((char *)&str2, 127, "Serial Number: %s\n", &str);
    v16 = get_line(4);
    g57 = 1;
    g58 = 1;
    display_clear_rows(v16, 1, 1, v2, v31, v30, v13, v28, 0, str2, 0, 0, 0);
    v17 = get_line(4);
    v18 = display_draw_text_at_line_with_color(v3, v17, g61, 0xffffff, v31, v30, v13, v28, 0, str2, 0, 0, 0);
    if (v4 != g46) {
        // 0x8f63d2f8
        __stack_chk_fail();
        // branch -> 0x8f63d2fc
    }
    // 0x8f63d2fc
    g60 = v1;
    return (char *)v18;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// void * memset(void * s, int c, size_t n);
// int snprintf(char * restrict s, size_t maxlen, const char * restrict format, ...);
// size_t strlen(const char * s);
// char * strncpy(char * restrict dest, const char * restrict src, size_t n);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 16
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 18:44:58
