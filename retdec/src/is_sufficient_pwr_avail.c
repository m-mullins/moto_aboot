//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

// ---------------- Integer Types Definitions -----------------

typedef int8_t int2_t;

// ------------------- Function Prototypes --------------------

int32_t adc_configure(int32_t * a1);
int32_t copyrect16(int32_t * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5, int32_t a6);
int32_t copyrect32(int32_t * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5, int32_t a6);
int32_t enable_irq(char * a1, int32_t a2, int32_t a3);
int32_t fillrect16(int32_t * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t fillrect24(int32_t * a1, int32_t a2, int32_t a3, uint32_t a4, int32_t a5);
int32_t fillrect32(int32_t * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t is_sufficient_pwr_avail(char * a1);
int32_t is_valid_supplier_id_95(int32_t a1, int32_t a2, int32_t a3);
int32_t oem_smb1359(int32_t a1, int32_t a2, int32_t a3);
int32_t oem_smb1359_usage(int32_t a1, int32_t a2, int32_t a3);
int32_t panel_init_96(int32_t * a1, int32_t a2, int32_t a3);
int32_t pm8x41_adc_channel_read(int32_t a1);
int32_t pm8x41_reg_read(uint32_t a1);
int32_t putpixel32(int32_t * a1, int32_t a2, int32_t a3, int32_t a4);
int32_t smb1359_is_hvdcp(int32_t a1);
int32_t smb1359_masked_write_reg(char * a1, int32_t a2, int32_t a3);
int32_t smb1359_power_source_detected(int32_t a1);
int32_t type_atoi_98(char * str, int32_t a2, int32_t a3);
int32_t update_panel_init_cmds_94(int32_t a1, int32_t a2);
int32_t update_panel_init_cmds_97(int32_t a1, int32_t a2);
char * usb_call_back(void);

// --------------------- Global Variables ---------------------

int32_t g27 = 0; // LR
int32_t g28 = 0; // R0
int32_t g29 = 0; // R1
int32_t g30 = 0; // R2
int32_t g31 = 0; // R3
int32_t g32 = 0; // R4
int32_t g33 = 0; // R5
int32_t g34 = 0; // R6
int32_t g35 = 0; // R7
int32_t g36 = 0; // R8
int32_t g1 = 0x2020003a; // 0x8f686ac4
int32_t g2 = 0x746e6300; // 0x8f6a4e20
int32_t g3 = 8; // 0x8f6aecc4
int32_t g4 = 8; // 0x8f6aed44
int32_t g5 = 1025; // 0x8f6aedcc
int32_t g7 = 7; // 0x8f6aede0
int32_t g8 = 720; // 0x8f6aef24
int32_t g9 = 1280; // 0x8f6aef28
int32_t g10 = 24; // 0x8f6aef30
int32_t g11 = 0; // 0x8f6aef44
int32_t g12 = 8; // 0x8f6aefe4
int32_t g13 = 8; // 0x8f6afc44
char * g14 = "\x01\x04"; // 0x8f6afce4
char g15 = 4; // 0x8f6afce5
int32_t g17 = 7; // 0x8f6afcf8
int32_t g18 = 8; // 0x8f6afd0c
int32_t g19 = 0x3100; // 0x8f6afddc
int16_t g20 = 49; // 0x8f6afde2
int32_t g21 = 0x3100; // 0x8f6afde8
int16_t g22 = 6; // 0x8f6afdee
int32_t g23 = 0x3100; // 0x8f6afdf4
int32_t g24 = 0; // 0x8f6e0b64
int32_t g25 = 0; // 0x8f6e0bd4
int32_t g26 = 0; // 0x8f7112f4
int32_t * g6 = &g4; // 0x8f6aeddc
int32_t * g16 = &g18; // 0x8f6afcf4

// ------------------------ Functions -------------------------

// Address range: 0x8f64689c - 0x8f646b03
int32_t is_sufficient_pwr_avail(char * a1) {
    int32_t v1;
    int32_t str = v1; // bp-68
    int32_t v2 = (int32_t)a1;
    int32_t str2;
    int32_t v3 = &str2; // 0x8f6468a0_0
    int32_t v4 = g26;
    g31 = v4;
    int32_t v5 = platform_detect_fact_cbl(v2, g29, g30, v4); // 0x8f6468b4
    int32_t result;
    if (v2 == 3) {
        // if_8f6468bc_0_true
        // branch -> 0x8f646a38
        // 0x8f646a38
        print_log(1, (int32_t)"Factory cable found, skip battery power check\n", v5, g31, str2, 0, 0, 0, 0, v1, 0, 0, 0);
        result = 1;
        // branch -> 0x8f646ab4
    } else {
        int32_t v6 = factory_kill_is_supported((char *)v2, g29, v5, g31, str2, 0, 0); // 0x8f6468c8
        int32_t v7; // 0x8f646a74
        int32_t v8; // 0x8f646a88
        int32_t v9; // 0x8f646a88
        int32_t v10; // 0x8f646a5c
        int32_t v11; // 0x8f646a60
        int32_t v12; // 0x8f646a6c
        int32_t v13; // 0x8f646a74
        int32_t v14; // 0x8f646a80
        int32_t v15; // 0x8f646a88
        int32_t v16; // 0x8f646aa4
        int32_t v17;
        int32_t v18;
        int32_t v19; // 0x8f646a58
        if (v6 == 0) {
            int32_t v20 = __utag_sizeof(NULL, (int32_t)"bootmode", v5, g31, str2, 0, 0, 0, 0); // 0x8f6468d8
            g32 = v20;
            if (v20 > 17) {
                // 0x8f6469e8
                if (v20 >= 18) {
                    // 0x8f6469f0
                    // branch -> 0x8f6469fc
                    // 0x8f6469fc
                    print_log(-1, (int32_t)"!!! Cannot get utag %s: payload overflow\n", (int32_t)"bootmode", g31, str2, 0, 0, 0, 0, v1, 0, 0, 0);
                    // branch -> 0x8f646a50
                }
            } else {
                // 0x8f6468ec
                g31 = v20;
                int32_t v21 = __utag_read((char *)v6, (int32_t)"bootmode", v3, v20, str2, 0, 0, 0, 0, v1, 0, 0, 0); // 0x8f6468fc
                g33 = v3;
                if (v21 != 0) {
                    int32_t v22 = 0x1000000 * str2;
                    g31 = v22 / 0x1000000;
                    int32_t v23; // 0x8f646938_0
                    char * found_char_pos; // 0x8f646950
                    int32_t v24; // 0x8f64695c
                    char * found_char_pos2; // 0x8f646990
                    int32_t v25; // 0x8f64699c
                    int32_t v26; // 0x8f6469c4
                    int32_t v27; // R2
                    int32_t v28; // 0x8f6469a0
                    int32_t v29; // 0x8f6469c0
                    if ((v22 || 0xffffff) < 0x1ffffff) {
                        // 0x8f646930
                        v23 = &str;
                        strncpy((char *)&str, "bootmode", 31);
                        found_char_pos = strrchr((char *)&str, 58);
                        v24 = type_atoi_98((char *)((int32_t)(found_char_pos != NULL) + (int32_t)found_char_pos), 58, 31);
                        v28 = v24;
                        if (v24 == 0) {
                            // 0x8f646968
                            strlcat(v23, (int32_t)&g1, 31, g31, str2, 0, 0, 0, 0, str, 0, 0);
                            strlcat(v23, (int32_t)"str", 31, g31, str2, 0, 0, 0, 0, str, 0, 0);
                            found_char_pos2 = strrchr((char *)&str, 58);
                            v25 = type_atoi_98((char *)((int32_t)(found_char_pos2 != NULL) + (int32_t)found_char_pos2), 58, 31);
                            v28 = v25;
                            // branch -> 0x8f6469a0
                        }
                        // 0x8f6469a0
                        if (v28 == 255) {
                            // after_if_8f6469ac_0.dec_label_pc_8f6469fc_crit_edge
                            // branch -> 0x8f6469fc
                            // 0x8f6469fc
                            print_log(-1, (int32_t)"Error: not a string type: %s\n", (int32_t)"<invalid>", g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                            // branch -> 0x8f646a50
                            // 0x8f646a50
                            v19 = v2;
                            v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                            v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
                            v7 = g31;
                            if (v11 != 0) {
                                // 0x8f646a6c
                                v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                                // branch -> 0x8f646a8c
                                // 0x8f646a8c
                                v18 = v12 / 1000;
                                v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                // branch -> 0x8f646ab4
                                // 0x8f646ab4
                                if (v4 != g26) {
                                    // 0x8f646ac4
                                    __stack_chk_fail();
                                    // branch -> 0x8f646ac8
                                }
                                // 0x8f646ac8
                                return v18 < v2 ? 1 : v16;
                            }
                            // 0x8f646a74
                            v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
                            v8 = g31;
                            v9 = str2;
                            if (v13 == 0) {
                                // 0x8f646a88
                                v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                                v17 = v15;
                                // branch -> 0x8f646a8c
                            } else {
                                // 0x8f646a80
                                v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                                v17 = v14;
                                // branch -> 0x8f646a8c
                            }
                            // 0x8f646a8c
                            v18 = v17 / 1000;
                            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                            // branch -> 0x8f646ab4
                            // 0x8f646ab4
                            if (v4 != g26) {
                                // 0x8f646ac4
                                __stack_chk_fail();
                                // branch -> 0x8f646ac8
                            }
                            // 0x8f646ac8
                            return v18 < v2 ? 1 : v16;
                        }
                        // 0x8f6469b4
                        v29 = g32;
                        g31 = v29;
                        v26 = __utag_validate(NULL, v23, v3, v29, str2, 0, 0, 0, 0, str, 0, 0, 0, 0);
                        if (v26 == 0) {
                            // 0x8f6469d0
                            g31 = v3;
                            print_log(-1, (int32_t)"!!! utag_validation FAIL for %s:%s\n", (int32_t)"bootmode", v3, str2, 0, 0, 0, 0, str, 0, 0, 0);
                            // branch -> 0x8f646a50
                        } else {
                            // 0x8f646a04
                            if (g33 != 0) {
                                // 0x8f646a0c
                                v27 = 16;
                                if (strncmp((char *)&str2, "factory", 16) == 0) {
                                    // 0x8f646a24
                                    if (is_emu_charger_present(0, (int32_t)"factory", v27, g31) == 0) {
                                        // 0x8f646a44
                                        if (is_usb_attached(0, (int32_t)"factory") == 0) {
                                            // 0x8f646a50
                                            v19 = v2;
                                            v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                            v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
                                            v7 = g31;
                                            if (v11 != 0) {
                                                // 0x8f646a6c
                                                v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                                                // branch -> 0x8f646a8c
                                                // 0x8f646a8c
                                                v18 = v12 / 1000;
                                                v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                                // branch -> 0x8f646ab4
                                                // 0x8f646ab4
                                                if (v4 != g26) {
                                                    // 0x8f646ac4
                                                    __stack_chk_fail();
                                                    // branch -> 0x8f646ac8
                                                }
                                                // 0x8f646ac8
                                                return v18 < v2 ? 1 : v16;
                                            }
                                            // 0x8f646a74
                                            v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
                                            v8 = g31;
                                            v9 = str2;
                                            if (v13 == 0) {
                                                // 0x8f646a88
                                                v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                                                v17 = v15;
                                                // branch -> 0x8f646a8c
                                            } else {
                                                // 0x8f646a80
                                                v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                                                v17 = v14;
                                                // branch -> 0x8f646a8c
                                            }
                                            // 0x8f646a8c
                                            v18 = v17 / 1000;
                                            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                            // branch -> 0x8f646ab4
                                            // 0x8f646ab4
                                            if (v4 != g26) {
                                                // 0x8f646ac4
                                                __stack_chk_fail();
                                                // branch -> 0x8f646ac8
                                            }
                                            // 0x8f646ac8
                                            return v18 < v2 ? 1 : v16;
                                        }
                                    }
                                    // 0x8f646a30
                                    // branch -> 0x8f646a38
                                    // 0x8f646a38
                                    print_log(1, (int32_t)"Factory mode set via UTAG, skip battery power check\n", v27, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                    // branch -> 0x8f646ab4
                                    // 0x8f646ab4
                                    if (v4 != g26) {
                                        // 0x8f646ac4
                                        __stack_chk_fail();
                                        // branch -> 0x8f646ac8
                                    }
                                    // 0x8f646ac8
                                    return 1;
                                }
                            }
                        }
                        // 0x8f646a50
                        v19 = v2;
                        v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
                        v7 = g31;
                        if (v11 != 0) {
                            // 0x8f646a6c
                            v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                            // branch -> 0x8f646a8c
                            // 0x8f646a8c
                            v18 = v12 / 1000;
                            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                            // branch -> 0x8f646ab4
                            // 0x8f646ab4
                            if (v4 != g26) {
                                // 0x8f646ac4
                                __stack_chk_fail();
                                // branch -> 0x8f646ac8
                            }
                            // 0x8f646ac8
                            return v18 < v2 ? 1 : v16;
                        }
                        // 0x8f646a74
                        v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
                        v8 = g31;
                        v9 = str2;
                        if (v13 == 0) {
                            // 0x8f646a88
                            v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                            v17 = v15;
                            // branch -> 0x8f646a8c
                        } else {
                            // 0x8f646a80
                            v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                            v17 = v14;
                            // branch -> 0x8f646a8c
                        }
                        // 0x8f646a8c
                        v18 = v17 / 1000;
                        v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        // branch -> 0x8f646ab4
                        // 0x8f646ab4
                        if (v4 != g26) {
                            // 0x8f646ac4
                            __stack_chk_fail();
                            // branch -> 0x8f646ac8
                        }
                        // 0x8f646ac8
                        return v18 < v2 ? 1 : v16;
                    }
                    // 0x8f646920
                    if (g32 == 17) {
                        // 0x8f646a50
                        v19 = v2;
                        v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
                        v7 = g31;
                        if (v11 != 0) {
                            // 0x8f646a6c
                            v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                            // branch -> 0x8f646a8c
                            // 0x8f646a8c
                            v18 = v12 / 1000;
                            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                            // branch -> 0x8f646ab4
                            // 0x8f646ab4
                            if (v4 != g26) {
                                // 0x8f646ac4
                                __stack_chk_fail();
                                // branch -> 0x8f646ac8
                            }
                            // 0x8f646ac8
                            return v18 < v2 ? 1 : v16;
                        }
                        // 0x8f646a74
                        v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
                        v8 = g31;
                        v9 = str2;
                        if (v13 == 0) {
                            // 0x8f646a88
                            v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                            v17 = v15;
                            // branch -> 0x8f646a8c
                        } else {
                            // 0x8f646a80
                            v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                            v17 = v14;
                            // branch -> 0x8f646a8c
                        }
                        // 0x8f646a8c
                        v18 = v17 / 1000;
                        v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        // branch -> 0x8f646ab4
                        // 0x8f646ab4
                        if (v4 != g26) {
                            // 0x8f646ac4
                            __stack_chk_fail();
                            // branch -> 0x8f646ac8
                        }
                        // 0x8f646ac8
                        return v18 < v2 ? 1 : v16;
                    }
                    // 0x8f646928
                    // branch -> 0x8f646930
                    // 0x8f646930
                    v23 = &str;
                    strncpy((char *)&str, "bootmode", 31);
                    found_char_pos = strrchr((char *)&str, 58);
                    v24 = type_atoi_98((char *)((int32_t)(found_char_pos != NULL) + (int32_t)found_char_pos), 58, 31);
                    v28 = v24;
                    if (v24 == 0) {
                        // 0x8f646968
                        strlcat(v23, (int32_t)&g1, 31, g31, str2, 0, 0, 0, 0, str, 0, 0);
                        strlcat(v23, (int32_t)"str", 31, g31, str2, 0, 0, 0, 0, str, 0, 0);
                        found_char_pos2 = strrchr((char *)&str, 58);
                        v25 = type_atoi_98((char *)((int32_t)(found_char_pos2 != NULL) + (int32_t)found_char_pos2), 58, 31);
                        v28 = v25;
                        // branch -> 0x8f6469a0
                    }
                    // 0x8f6469a0
                    if (v28 == 255) {
                        // after_if_8f6469ac_0.dec_label_pc_8f6469fc_crit_edge
                        // branch -> 0x8f6469fc
                        // 0x8f6469fc
                        print_log(-1, (int32_t)"Error: not a string type: %s\n", (int32_t)"<invalid>", g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        // branch -> 0x8f646a50
                        // 0x8f646a50
                        v19 = v2;
                        v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
                        v7 = g31;
                        if (v11 != 0) {
                            // 0x8f646a6c
                            v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                            // branch -> 0x8f646a8c
                            // 0x8f646a8c
                            v18 = v12 / 1000;
                            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                            // branch -> 0x8f646ab4
                            // 0x8f646ab4
                            if (v4 != g26) {
                                // 0x8f646ac4
                                __stack_chk_fail();
                                // branch -> 0x8f646ac8
                            }
                            // 0x8f646ac8
                            return v18 < v2 ? 1 : v16;
                        }
                        // 0x8f646a74
                        v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
                        v8 = g31;
                        v9 = str2;
                        if (v13 == 0) {
                            // 0x8f646a88
                            v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                            v17 = v15;
                            // branch -> 0x8f646a8c
                        } else {
                            // 0x8f646a80
                            v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                            v17 = v14;
                            // branch -> 0x8f646a8c
                        }
                        // 0x8f646a8c
                        v18 = v17 / 1000;
                        v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        // branch -> 0x8f646ab4
                        // 0x8f646ab4
                        if (v4 != g26) {
                            // 0x8f646ac4
                            __stack_chk_fail();
                            // branch -> 0x8f646ac8
                        }
                        // 0x8f646ac8
                        return v18 < v2 ? 1 : v16;
                    }
                    // 0x8f6469b4
                    v29 = g32;
                    g31 = v29;
                    v26 = __utag_validate(NULL, v23, v3, v29, str2, 0, 0, 0, 0, str, 0, 0, 0, 0);
                    if (v26 == 0) {
                        // 0x8f6469d0
                        g31 = v3;
                        print_log(-1, (int32_t)"!!! utag_validation FAIL for %s:%s\n", (int32_t)"bootmode", v3, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        // branch -> 0x8f646a50
                    } else {
                        // 0x8f646a04
                        if (g33 != 0) {
                            // 0x8f646a0c
                            v27 = 16;
                            if (strncmp((char *)&str2, "factory", 16) == 0) {
                                // 0x8f646a24
                                if (is_emu_charger_present(0, (int32_t)"factory", v27, g31) == 0) {
                                    // 0x8f646a44
                                    if (is_usb_attached(0, (int32_t)"factory") == 0) {
                                        // 0x8f646a50
                                        v19 = v2;
                                        v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                        v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
                                        v7 = g31;
                                        if (v11 != 0) {
                                            // 0x8f646a6c
                                            v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                                            // branch -> 0x8f646a8c
                                            // 0x8f646a8c
                                            v18 = v12 / 1000;
                                            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                            // branch -> 0x8f646ab4
                                            // 0x8f646ab4
                                            if (v4 != g26) {
                                                // 0x8f646ac4
                                                __stack_chk_fail();
                                                // branch -> 0x8f646ac8
                                            }
                                            // 0x8f646ac8
                                            return v18 < v2 ? 1 : v16;
                                        }
                                        // 0x8f646a74
                                        v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
                                        v8 = g31;
                                        v9 = str2;
                                        if (v13 == 0) {
                                            // 0x8f646a88
                                            v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                                            v17 = v15;
                                            // branch -> 0x8f646a8c
                                        } else {
                                            // 0x8f646a80
                                            v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                                            v17 = v14;
                                            // branch -> 0x8f646a8c
                                        }
                                        // 0x8f646a8c
                                        v18 = v17 / 1000;
                                        v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                        // branch -> 0x8f646ab4
                                        // 0x8f646ab4
                                        if (v4 != g26) {
                                            // 0x8f646ac4
                                            __stack_chk_fail();
                                            // branch -> 0x8f646ac8
                                        }
                                        // 0x8f646ac8
                                        return v18 < v2 ? 1 : v16;
                                    }
                                }
                                // 0x8f646a30
                                // branch -> 0x8f646a38
                                // 0x8f646a38
                                print_log(1, (int32_t)"Factory mode set via UTAG, skip battery power check\n", v27, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                                // branch -> 0x8f646ab4
                                // 0x8f646ab4
                                if (v4 != g26) {
                                    // 0x8f646ac4
                                    __stack_chk_fail();
                                    // branch -> 0x8f646ac8
                                }
                                // 0x8f646ac8
                                return 1;
                            }
                        }
                    }
                    // 0x8f646a50
                    v19 = v2;
                    v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                    v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
                    v7 = g31;
                    if (v11 != 0) {
                        // 0x8f646a6c
                        v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                        // branch -> 0x8f646a8c
                        // 0x8f646a8c
                        v18 = v12 / 1000;
                        v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                        // branch -> 0x8f646ab4
                        // 0x8f646ab4
                        if (v4 != g26) {
                            // 0x8f646ac4
                            __stack_chk_fail();
                            // branch -> 0x8f646ac8
                        }
                        // 0x8f646ac8
                        return v18 < v2 ? 1 : v16;
                    }
                    // 0x8f646a74
                    v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
                    v8 = g31;
                    v9 = str2;
                    if (v13 == 0) {
                        // 0x8f646a88
                        v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                        v17 = v15;
                        // branch -> 0x8f646a8c
                    } else {
                        // 0x8f646a80
                        v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                        v17 = v14;
                        // branch -> 0x8f646a8c
                    }
                    // 0x8f646a8c
                    v18 = v17 / 1000;
                    v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                    // branch -> 0x8f646ab4
                    // 0x8f646ab4
                    if (v4 != g26) {
                        // 0x8f646ac4
                        __stack_chk_fail();
                        // branch -> 0x8f646ac8
                    }
                    // 0x8f646ac8
                    return v18 < v2 ? 1 : v16;
                }
            }
            // 0x8f646a50
            v19 = v2;
            v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
            v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
            v7 = g31;
            if (v11 != 0) {
                // 0x8f646a6c
                v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
                // branch -> 0x8f646a8c
                // 0x8f646a8c
                v18 = v12 / 1000;
                v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
                // branch -> 0x8f646ab4
                // 0x8f646ab4
                if (v4 != g26) {
                    // 0x8f646ac4
                    __stack_chk_fail();
                    // branch -> 0x8f646ac8
                }
                // 0x8f646ac8
                return v18 < v2 ? 1 : v16;
            }
            // 0x8f646a74
            v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
            v8 = g31;
            v9 = str2;
            if (v13 == 0) {
                // 0x8f646a88
                v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                v17 = v15;
                // branch -> 0x8f646a8c
            } else {
                // 0x8f646a80
                v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                v17 = v14;
                // branch -> 0x8f646a8c
            }
            // 0x8f646a8c
            v18 = v17 / 1000;
            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
            // branch -> 0x8f646ab4
            // 0x8f646ab4
            if (v4 != g26) {
                // 0x8f646ac4
                __stack_chk_fail();
                // branch -> 0x8f646ac8
            }
            // 0x8f646ac8
            return v18 < v2 ? 1 : v16;
        }
        // 0x8f646a50
        v19 = v2;
        v10 = print_log(1, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
        v11 = is_battery_max17050(v10, (int32_t)"Battery power check, threshold = %dmV\n", v19, g31);
        v7 = g31;
        if (v11 == 0) {
            // 0x8f646a74
            v13 = is_battery_max17058(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7);
            v8 = g31;
            v9 = str2;
            if (v13 == 0) {
                // 0x8f646a88
                v15 = pm8x41_get_batt_voltage(0, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9, 0);
                v17 = v15;
                // branch -> 0x8f646a8c
            } else {
                // 0x8f646a80
                v14 = max17058_get_battery_voltage(v13, (int32_t)"Battery power check, threshold = %dmV\n", v19, v8, v9);
                v17 = v14;
                // branch -> 0x8f646a8c
            }
            // 0x8f646a8c
            v18 = v17 / 1000;
            v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
            // branch -> 0x8f646ab4
            // 0x8f646ab4
            if (v4 != g26) {
                // 0x8f646ac4
                __stack_chk_fail();
                // branch -> 0x8f646ac8
            }
            // 0x8f646ac8
            return v18 < v2 ? 1 : v16;
        }
        // 0x8f646a6c
        v12 = max17050_get_battery_voltage(v11, (int32_t)"Battery power check, threshold = %dmV\n", v19, v7, str2);
        // branch -> 0x8f646a8c
        // 0x8f646a8c
        v18 = v12 / 1000;
        v16 = print_log(1, (int32_t)"batt status: %d\n", v18, g31, str2, 0, 0, 0, 0, str, 0, 0, 0);
        result = v18 < v2 ? 1 : v16;
        // branch -> 0x8f646ab4
    }
    // 0x8f646ab4
    if (v4 != g26) {
        // 0x8f646ac4
        __stack_chk_fail();
        // branch -> 0x8f646ac8
    }
    // 0x8f646ac8
    return result;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// long int atol(const char * nptr);
// void * memset(void * s, int c, size_t n);
// int strcmp(const char * s1, const char * s2);
// int strncmp(const char * s1, const char * s2, size_t n);
// char * strncpy(char * restrict dest, const char * restrict src, size_t n);
// char * strrchr(char * s, int c);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 22
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 18:49:14
