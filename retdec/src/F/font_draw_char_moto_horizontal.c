//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <ctype.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

int32_t __aeabi_idivmod(int32_t a1, int32_t a2);
int32_t __utag_describe(int32_t a1, int32_t a2, int32_t a3);
int32_t arg_free(char * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5);
int32_t atoull(char * a1, int32_t a2);
int32_t decode_hw_type(char * a1, int32_t a2, int32_t a3);
int32_t display_render_done(int32_t a1, int32_t a2);
int32_t fdt_pack(int32_t a1, int32_t a2, int32_t a3);
int32_t font_draw_char_moto(int32_t * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5, int32_t a6);
int32_t font_draw_char_moto_horizontal(int32_t * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5, int32_t a6);
void function_8f649e14(void);
void function_8f67b584(void);
int32_t get_timestamp(int32_t a1, int32_t a2, int32_t a3);
int32_t initialize_montgomery_alg(int32_t * a1, int32_t a2, int32_t a3);
int32_t is_charging_enabled(int32_t a1, int32_t a2, int32_t a3);
int32_t mot_sst_get_unlock_data_length(int32_t a1, int32_t a2, int32_t a3);
int32_t mot_sst_is_warranty_void(int32_t a1);
int32_t mot_sst_set_state_values_for_nonhlos(void);
int32_t mot_sst_validate_hash_password(int32_t a1, char * a2);
int32_t mp_mont_sqr(int32_t * a1, int32_t result, int32_t a3);
int32_t pm8x41_gpio_config(int32_t a1, int32_t * a2, int32_t a3);
int32_t pm8x41_set_boot_done(int32_t a1);
int32_t pmic_set_chg_set_mode(char a1, int32_t a2, int32_t a3);
int32_t qtimer_irq(int32_t a1, int32_t a2, int32_t a3, int32_t a4);
int32_t SecGetSVNum(uint32_t a1, int32_t a2);
int32_t set_logo(char a1, int32_t a2, int32_t a3);
int32_t sod_update(char * a1, int32_t a2, int32_t a3);
int32_t target_set_prod_id(char * a1, int32_t a2, int32_t a3);
int32_t udc_start(int32_t a1, int32_t a2);
int32_t udc_stop(int32_t a1, int32_t a2);
int32_t wait_clogo(int32_t a1, int32_t a2, int32_t a3);

// --------------------- Global Variables ---------------------

int32_t g16 = 0; // LR
int32_t g17 = 0; // R0
int32_t g18 = 0; // R1
int32_t g19 = 0; // R10
int32_t g20 = 0; // R2
int32_t g21 = 0; // R3
int32_t g22 = 0; // R4
int32_t g23 = 0; // R5
int32_t g24 = 0; // R6
int32_t g25 = 0; // R7
int32_t g26 = 0; // R8
int32_t g27 = 0; // R9
int32_t g1 = -0x16d2bf10; // 0x8f60569c
int32_t g2 = -1; // 0x8f6ac0e0
int32_t g3 = 1; // 0x8f6ac0f0
char * g4 = "\x01"; // 0x8f6afe10
int32_t g5 = 0; // 0x8f6b792c
char * g6; // 0x8f6b794c
int32_t g7 = 0; // 0x8f6b8abc
int32_t g8 = 0; // 0x8f6b8ac0
int32_t g9 = 0; // 0x8f6b8ac4
int32_t (*g10)(int32_t, int32_t, int32_t, int32_t, int32_t, int32_t, int32_t, int32_t) = NULL; // 0x8f6b8ac8
int32_t g11 = 0; // 0x8f6b8acc
int32_t g12 = 0; // 0x8f6e08b8
char * g13; // 0x8f6e08f9
char * g14; // 0x8f6e0b60
int32_t g15 = 0; // 0x8f7112f4

// ------------------------ Functions -------------------------

// Address range: 0x8f6487a0 - 0x8f648933
int32_t font_draw_char_moto_horizontal(int32_t * a1, int32_t a2, int32_t a3, int32_t a4, int32_t a5, int32_t a6) {
    int32_t v1 = (int32_t)a1;
    int32_t v2 = g23; // 0x8f6487a0
    int32_t v3 = g25; // 0x8f6487a0
    g23 = 0;
    uint32_t v4 = *(int32_t *)(v1 + 20) + 7; // 0x8f6487c8
    int32_t v5 = g15;
    int32_t v6;
    int32_t v7 = 0x1000000 * v6;
    int32_t result = v7 / 0x1000000; // 0x8f6487d0
    int32_t v8 = v4 / 8; // 0x8f6487d4
    int32_t v9 = 8 * v8; // 0x8f6487e0
    int32_t v10 = v5;
    int32_t result2; // 0x8f648918
    int32_t v11; // 0x8f648908
    int32_t v12; // 0x8f648900
    if (*(int32_t *)(v1 + 24) == 0) {
        int32_t v13 = v1; // 0x8f64888010
        int32_t v14 = v8; // 0x8f64881c
        int32_t v15 = 0; // 0x8f648818
        int32_t v16 = 0; // 0x8f648804
        // branch -> 0x8f648804
        while (true) {
            int32_t v17 = (v16 / 2 * a3 + v15 / 2) * v14; // 0x8f64881c
            int32_t v18 = 0; // 0x8f64885c
            int32_t v19; // R10
            int32_t v20; // 0x8f6488688
            int32_t v21; // 0x8f64888c38
            int32_t v22; // 0x8f64886c9
            if (v14 != 0) {
                int32_t v23 = 0; // 0x8f64882c
                int32_t v24 = v23 + 1; // 0x8f648830
                char v25 = *(char *)(*(int32_t *)v13 + v23 + v17); // 0x8f648834
                int32_t v26 = v25; // 0x8f648838
                v18 = v26;
                // branch -> 0x8f648828
                while (v24 != v14) {
                    // 0x8f648828
                    v23 = v24;
                    v24 = v23 + 1;
                    v25 = *(char *)(*(int32_t *)v13 + v23 + v17);
                    v26 = (int32_t)v25 | 256 * v26;
                    v18 = v26;
                    // continue -> 0x8f648828
                }
                // 0x8f648840
                v19 = 0;
                v21 = 0;
                if (v4 >= 8) {
                    v22 = 0;
                    v20 = 0;
                  lab_0x8f648854:;
                    int32_t v27; // 0x8f64886c
                    while (true) {
                        uint32_t v28 = (v9 - 1 - v20) % 256; // 0x8f64885c
                        uint32_t v29 = (v18 >> (v28 > 32 ? 32 : v28)) % 2; // 0x8f648860
                        uint32_t v30 = v20 % 256; // 0x8f648864
                        uint32_t v31 = v30 == 0 ? v29 : v30 < 32 ? v29 << v30 : 0; // 0x8f648864
                        int32_t v32 = v20 + 1; // 0x8f648868
                        v27 = v31 % 0x10000 | v22;
                        if (v32 == v9) {
                            // break -> 0x8f648848
                            break;
                        }
                        v22 = v27;
                        v20 = v32;
                        // continue -> 0x8f648854
                    }
                    // 0x8f648848
                    v19 = v27;
                    v21 = v27;
                    // branch -> 0x8f648874
                }
              lab_0x8f648874:
                // 0x8f648874
                g25 = 0;
                int32_t v33 = a4 - 1; // 0x8f648878
                int32_t v34 = v13; // 0x8f6487f8
                int32_t v35 = v15; // 0x8f6488d4
                if (*(int32_t *)(v13 + 20) == 0) {
                    int32_t v36 = v13; // 0x8f64888042
                    int32_t v37 = 0; // 0x8f648894
                    int32_t v38 = v21; // 0x8f64888c
                    int32_t v39; // 0x8f648880
                    while (true) {
                        // 0x8f64888c
                        v39 = v36;
                        int32_t v40 = v37; // 0x8f6488cc
                        int32_t v41 = v38; // 0x8f6488c8
                        if (v38 % 2 != 0) {
                            int32_t v42 = a5 + v37; // 0x8f648894
                            int32_t v43;
                            gfx_putpixel(a2, a4, v42, a6, v43, v42, v9, a6, a3);
                            gfx_putpixel(a2, v33, v42, a6, v43, v42, v9, a6, a3);
                            v39 = v1;
                            v40 = g25;
                            v41 = v19;
                            // branch -> 0x8f6488c8
                        }
                        int32_t v44 = v41 / 2; // 0x8f6488c8
                        v19 = v44;
                        int32_t v45 = v40 + 1; // 0x8f6488cc
                        g25 = v45;
                        if (v45 < *(int32_t *)(v39 + 20)) {
                            // break -> 0x8f648880
                            break;
                        }
                        v36 = v39;
                        v37 = v45;
                        v38 = v44;
                        // continue -> 0x8f64888c
                    }
                    // 0x8f648880
                    v34 = v39;
                    v35 = g23;
                    // branch -> 0x8f6488d4
                }
                int32_t v46 = v35 + 2; // 0x8f6488d4
                g23 = v46;
                uint32_t v47 = *(int32_t *)(v34 + 24); // 0x8f6487f8
                if (v46 < v47) {
                    // 0x8f6487f8
                    v10 = g15;
                    // branch -> 0x8f6488e0
                    // 0x8f6488e0
                    if ((v7 || 0xffffff) < 0x1ffffff) {
                        // 0x8f64891c
                        if (v5 == v10) {
                            // 0x8f648928
                            g23 = v2;
                            g25 = v3;
                            return result;
                        }
                    } else {
                        // 0x8f6488f8
                        if (v5 == v10) {
                            // 0x8f648900
                            v12 = *(int32_t *)(v34 + 20);
                            v11 = a5;
                            g23 = v2;
                            g25 = v3;
                            result2 = gfx_flush_rows(a2, v11, v11 + v12, v5, g22, v2, g24, v3, g26, g27, g19);
                            return result2;
                        }
                    }
                    // 0x8f648924
                    __stack_chk_fail();
                    // branch -> 0x8f648928
                    // 0x8f648928
                    g23 = v2;
                    g25 = v3;
                    return result;
                }
                // 0x8f6488d4
                a4 -= 2;
                v13 = v34;
                v14 = v8;
                v15 = v46;
                v16 = v47;
                // branch -> 0x8f648804
                continue;
            }
            // 0x8f648840
            v19 = 0;
            if (v4 < 8) {
                v21 = 0;
                goto lab_0x8f648874;
            }
            v22 = 0;
            v20 = 0;
            goto lab_0x8f648854;
        }
    }
    // 0x8f6488e0
    if ((v7 || 0xffffff) < 0x1ffffff) {
        // 0x8f64891c
        if (v5 == v10) {
            // 0x8f648928
            g23 = v2;
            g25 = v3;
            return result;
        }
    } else {
        // 0x8f6488f8
        if (v5 == v10) {
            // 0x8f648900
            v12 = *(int32_t *)(v1 + 20);
            v11 = a5;
            g23 = v2;
            g25 = v3;
            result2 = gfx_flush_rows(a2, v11, v11 + v12, v5, g22, v2, g24, v3, g26, g27, g19);
            return result2;
        }
    }
    // 0x8f648924
    __stack_chk_fail();
    // branch -> 0x8f648928
    // 0x8f648928
    g23 = v2;
    g25 = v3;
    return result;
}

// --------------- Statically Linked Functions ----------------

// void __stack_chk_fail(void);
// void free(void * ptr);
// int isdigit(int c);
// int isxdigit(int c);
// void * malloc(size_t size);
// void * memcpy(void * restrict dest, const void * restrict src, size_t n);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 30
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 19:31:19
