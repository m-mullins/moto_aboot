//
// This file was generated by the Retargetable Decompiler
// Website: https://retdec.com
// Copyright (c) 2017 Retargetable Decompiler <info@retdec.com>
//

#include <ctype.h>
#include <stdbool.h>
#include <stdint.h>
#include <stdlib.h>
#include <string.h>

// ------------------- Function Prototypes --------------------

int32_t apps_init(int32_t a1, int32_t a2, int32_t a3);
int32_t clk_get_set_enable(int32_t a1, int32_t a2, int32_t a3);
int32_t factory_mode(int32_t a1, int32_t a2, int32_t a3);
int32_t fdt_appendprop_str(int32_t a1, int32_t a2, int32_t a3, char * a4);
int32_t fdt_setprop_with_offset(int32_t a1, int32_t a2, int32_t a3, int32_t a4, char * a5);
void function_8f660c54(void);
int32_t gpt_get_back_zone_address(int32_t a1, int32_t a2, int32_t a3);
int32_t hsusb_clock_init(int32_t a1);
int32_t is_bptools_mode(void);
int32_t max17058_get_battery_capacity(int32_t a1, int32_t a2);
int32_t max17058_get_battery_voltage(int32_t a1, int32_t a2);
int32_t mcs_array_factor_bit_length(int32_t a1, int32_t a2, int32_t a3);
int32_t mcs_free_name(char * a1, int32_t a2);
int32_t mcs_habp_rsa_med(int32_t a1);
int32_t mcs_habp_rsa_small(int32_t a1);
int32_t mcs_X509Certificate_getIssuer(int32_t a1, int32_t * a2);
int32_t mcs_X509Certificate_getSubject(void);
int32_t msm_gpio_int_disable(int32_t a1, int32_t a2, int32_t a3, int32_t a4);
int32_t msm_gpio_int_enable(int32_t a1, int32_t a2, int32_t a3, int32_t a4);
int32_t platform_detect_fact_cbl(int32_t a1, int32_t a2, int32_t a3);
int32_t pll_vote_clk_enable(int32_t a1, int32_t a2, int32_t a3);
int32_t SecMakeEngineering(int32_t a1, int32_t a2);
int32_t SecSetModelID(int32_t a1, int32_t a2, int32_t a3);
int32_t smb135x_enable_usbin_valid_irq(int32_t a1);
int32_t smb135x_temp_charging(int32_t a1, int32_t a2, int32_t a3);
int32_t speedo_early_init(char * a1, int32_t a2, int32_t a3);
int32_t speedo_read(int32_t a1, int32_t a2, int32_t a3);
int32_t target_disable_cont_splash_screen(int32_t a1);
int32_t target_restart_reason_addr(int32_t a1, int32_t a2);

// --------------------- Global Variables ---------------------

int32_t g21 = 0; // LR
int32_t g22 = 0; // R0
int32_t g23 = 0; // R1
int32_t g24 = 0; // R2
int32_t g25 = 0; // R3
int32_t g26 = 0; // R4
int32_t g27 = 0; // R5
int32_t g28 = 0; // R6
int32_t g29 = 0; // R7
int32_t g30 = 0; // R8
int32_t g31 = 0; // R9
int32_t g1 = -0x16d2bfed; // 0x8f61c6b4
int32_t g2 = -0x16d2bc10; // 0x8f61cc94
int32_t g3 = -0x16d2be10; // 0x8f61cfe4
int32_t g4 = -0x1a60ced0; // 0x8f638854
int32_t g5 = -0x16d2bfe1; // 0x8f6389cc
int32_t g6 = 0x65440030; // 0x8f69c66f
int32_t g9 = -0x709d39dc; // 0x8f6a93e4
int32_t g10 = 1; // 0x8f6ac0dc
int32_t g11 = 1; // 0x8f6ac0f0
char * g12 = "\n"; // 0x8f6ac1b0
int32_t g13 = 0; // 0x8f6e079c
int32_t g14 = 0; // 0x8f6e0b5c
int32_t g15 = 0; // 0x8f6e0ba4
int32_t g16 = 0; // 0x8f710e80
int32_t g17 = 0; // 0x8f710e84
int32_t g18 = 0; // 0x8f710e88
int32_t g19 = 0; // 0x8f710e8c
int32_t g20 = 0; // 0x8f7112f4
char * g7[3] = {
    "mbm",
    (char *)&g3,
    (char *)&g2
}; // 0x8f6a93c4
char * g8[3] = {
    "screen_manager",
    (char *)&g5,
    (char *)&g4
}; // 0x8f6a93d4

// ------------------------ Functions -------------------------

// Address range: 0x8f64cedc - 0x8f64cfaf
int32_t fdt_setprop_with_offset(int32_t a1, int32_t a2, int32_t a3, int32_t a4, char * a5) {
    // 0x8f64cedc
    g22 = a1;
    int32_t v1 = a1; // bp-48
    int32_t v2 = g29; // 0x8f64cedc
    int32_t v3 = &v1; // 0x8f64cedc_1
    g29 = a2;
    int32_t v4 = (int32_t)a5; // R9
    int32_t result = g20;
    int32_t v5 = _fdt_rw_check_header(a1, a2, a3, result, a1, result, a3); // 0x8f64cf04
    g22 = v5;
    if (v5 != 0) {
        // 0x8f64cf90
        g22 = v5;
        if (result != g20) {
            // 0x8f64cfa0
            __stack_chk_fail();
            // branch -> 0x8f64cfa4
        }
        // 0x8f64cfa4
        g29 = v2;
        return result;
    }
    // 0x8f64cf10
    g22 = a1;
    int32_t v6 = fdt_get_property(a1, g29, a3, v3, v1, result, a3, g26, g27, g28, v2, g30, g31); // 0x8f64cf20
    g22 = v6;
    if (v6 == 0) {
        // 0x8f64cf90
        g22 = -1;
        if (result != g20) {
            // 0x8f64cfa0
            __stack_chk_fail();
            // branch -> 0x8f64cfa4
        }
        // 0x8f64cfa4
        g29 = v2;
        return result;
    }
    int32_t v7 = v1; // 0x8f64cf2c
    int32_t v8;
    int32_t v9 = a4 + v8; // 0x8f64cf30
    g29 = v9;
    char * dest_mem; // 0x8f64cf7c
    int32_t v10;
    int32_t v11; // 0x8f64cf78
    if (v7 < v9) {
        // 0x8f64cf3c
        g22 = a1;
        int32_t v12 = v6 + 12; // 0x8f64cf48
        int32_t v13 = v7 + 3 & -4; // 0x8f64cf4c
        int32_t v14 = v9 + 3 & -4; // 0x8f64cf50
        int32_t v15 = _fdt_splice_struct(a1, v12, v13, v14, v7, result, a3, g26, g27, g28, v2, g30, g31); // 0x8f64cf54
        g22 = v15;
        if (v15 == 0) {
            // 0x8f64cf60
            g22 = g29;
            int32_t v16 = fdt32_to_cpu_101(g29, v12, v13, v14, v1, result, a3, g26, g27, g28); // 0x8f64cf64
            g22 = v16;
            *(int32_t *)(v6 + 4) = v16;
            // branch -> 0x8f64cf6c
            // 0x8f64cf6c
            v11 = v6 + 12 + a4;
            g22 = v11;
            dest_mem = memcpy((char *)v11, (char *)v4, v8);
            g22 = (int32_t)dest_mem;
            v10 = v15;
            // branch -> 0x8f64cf90
        } else {
            v10 = v15;
        }
    } else {
        // 0x8f64cf6c
        v11 = v6 + 12 + a4;
        g22 = v11;
        dest_mem = memcpy((char *)v11, (char *)v4, v8);
        g22 = (int32_t)dest_mem;
        v10 = v5;
        // branch -> 0x8f64cf90
    }
    // 0x8f64cf90
    g22 = v10;
    if (result != g20) {
        // 0x8f64cfa0
        __stack_chk_fail();
        // branch -> 0x8f64cfa4
    }
    // 0x8f64cfa4
    g29 = v2;
    return result;
}

// --------------- Statically Linked Functions ----------------

// ulldiv_t __aeabi_uldivmod(unsigned long long a, unsigned long long b);
// void __stack_chk_fail(void);
// void free(void * ptr);
// int isalnum(int c);
// void * malloc(size_t size);
// int memcmp(const void * s1, const void * s2, size_t n);
// void * memcpy(void * restrict dest, const void * restrict src, size_t n);
// void * memset(void * s, int c, size_t n);
// int strcmp(const char * s1, const char * s2);
// size_t strlen(const char * s);

// --------------------- Meta-Information ---------------------

// Detected compiler/packer: android-ndk-r8 (4.4.3 armv5te, armv7a(arm-linux-androideabi-gcc))
// Detected functions: 29
// Decompiler release: v2.2.1 (2016-09-07)
// Decompilation date: 2017-08-06 19:37:27
